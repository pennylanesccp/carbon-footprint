[2025-11-10 11:34:33][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:33][INFO][scripts.build_heatmap_from_file] Starting heatmap build | origin=Av. Luciano Gualberto | amount=50.000 t
[2025-11-10 11:34:33][INFO][scripts.build_heatmap_from_file] Log file → logs\output_20251110113433.log
[2025-11-10 11:34:33][INFO][scripts.build_heatmap_from_file] Destinations loaded: 5570 (from data\city_dests.txt)
[2025-11-10 11:34:33][INFO][scripts.build_heatmap_from_file] Output CSV → outputs\Av_Luciano_Gualberto__50tons.csv
[2025-11-10 11:34:33][INFO][scripts.build_heatmap_from_file] ORS timeouts/retries: ORS_ESCALATE_ON_TIMEOUT=1
[2025-11-10 11:34:33][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:33][INFO][scripts.build_heatmap_from_file] → [1/5570] Acrelândia, AC
[2025-11-10 11:34:33][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:34][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:34][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:34][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:34][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:34][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:34][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:34][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:34][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:34][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] GEOCODE text='Acrelândia, AC' country=BR size=1
[2025-11-10 11:34:34][INFO][modules.road.ors_mixins] GEOCODE text="Acrelândia, AC" country=BR size=1
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.82778, 'lon': -66.88333, 'label': 'Acrelandia, R., Brazil'}
[2025-11-10 11:34:34][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Acrelandia, R., Brazil'.
[2025-11-10 11:34:34][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:34][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AC → price_o=6.09, price_d=7.63, avg=6.8600, fallback_used=False
[2025-11-10 11:34:34][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.8600 BRL/L (fallback_used=False).
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.82778, 'lon': -66.88333, 'label': 'Acrelandia, R., Brazil'}
[2025-11-10 11:34:34][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-66.88333, -9.82778]]
[2025-11-10 11:34:34][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3462220.0m dur=181312s
[2025-11-10 11:34:34][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:34][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3462.2200, liters_empty=0.0000, liters_total=3462.2200
[2025-11-10 11:34:34][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3462.2200, fuel_cost_brl=23750.83, co2e_total_kg=9278.750, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:34][INFO][modules.app.evaluator] road_leg: km=3462.220 liters=3462.220 fuel_kg=2908.265 co2e=9278.750 cost=23750.83
[2025-11-10 11:34:34][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:34][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1061.403 km via centroid.
[2025-11-10 11:34:34][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1061.403 km).
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:34][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:34][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:34][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:34][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:34][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=621.46, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:34][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=621.46
[2025-11-10 11:34:34][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:34][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:34][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:34][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:34][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.82778, 'lon': -66.88333, 'label': 'Acrelandia, R., Brazil'}
[2025-11-10 11:34:34][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-66.88333, -9.82778]]
[2025-11-10 11:34:34][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1284107.1m dur=105806s
[2025-11-10 11:34:34][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:34][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1284.1071, liters_empty=0.0000, liters_total=1284.1071
[2025-11-10 11:34:34][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1284.1071, fuel_cost_brl=8808.97, co2e_total_kg=3441.407, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:34][INFO][modules.app.evaluator] road_leg: km=1284.107 liters=1284.107 fuel_kg=1078.650 co2e=3441.407 cost=8808.97
[2025-11-10 11:34:34][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=9278.750 kg, CABOTAGE CO2e=5658.650 kg (Δ=-3620.100 kg).
[2025-11-10 11:34:34][INFO][scripts.build_heatmap_from_file] CSV+ Acrelândia, AC,-12349.632553664593,-3620.0995958402164
[2025-11-10 11:34:34][INFO][scripts.build_heatmap_from_file] ✓ done in 0.90s — Acrelândia, AC
[2025-11-10 11:34:34][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:34][INFO][scripts.build_heatmap_from_file] → [2/5570] Assis Brasil, AC
[2025-11-10 11:34:34][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:35][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:35][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:35][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:35][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:35][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:35][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:35][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:35][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:35][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] GEOCODE text='Assis Brasil, AC' country=BR size=1
[2025-11-10 11:34:35][INFO][modules.road.ors_mixins] GEOCODE text="Assis Brasil, AC" country=BR size=1
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -10.935672, 'lon': -69.560485, 'label': 'Assis Brasil, R., Brazil'}
[2025-11-10 11:34:35][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Assis Brasil, R., Brazil'.
[2025-11-10 11:34:35][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:35][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:35][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.935672, 'lon': -69.560485, 'label': 'Assis Brasil, R., Brazil'}
[2025-11-10 11:34:35][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-69.560485, -10.935672]]
[2025-11-10 11:34:35][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3887031.6m dur=203803s
[2025-11-10 11:34:35][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:35][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3887.0316, liters_empty=0.0000, liters_total=3887.0316
[2025-11-10 11:34:35][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3887.0316, fuel_cost_brl=23672.02, co2e_total_kg=10417.245, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:35][INFO][modules.app.evaluator] road_leg: km=3887.032 liters=3887.032 fuel_kg=3265.107 co2e=10417.245 cost=23672.02
[2025-11-10 11:34:35][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:35][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1362.961 km via centroid.
[2025-11-10 11:34:35][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1362.961 km).
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:35][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:35][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:35][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:35][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:35][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:35][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:35][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:35][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:35][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:35][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:35][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:35][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.935672, 'lon': -69.560485, 'label': 'Assis Brasil, R., Brazil'}
[2025-11-10 11:34:35][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-69.560485, -10.935672]]
[2025-11-10 11:34:35][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1708918.7m dur=128296s
[2025-11-10 11:34:35][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:35][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1708.9187, liters_empty=0.0000, liters_total=1708.9187
[2025-11-10 11:34:35][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1708.9187, fuel_cost_brl=10407.31, co2e_total_kg=4579.902, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:35][INFO][modules.app.evaluator] road_leg: km=1708.919 liters=1708.919 fuel_kg=1435.492 co2e=4579.902 cost=10407.31
[2025-11-10 11:34:35][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=10417.245 kg, CABOTAGE CO2e=6797.145 kg (Δ=-3620.100 kg).
[2025-11-10 11:34:35][INFO][scripts.build_heatmap_from_file] CSV+ Assis Brasil, AC,-10742.2413836646,-3620.099595840218
[2025-11-10 11:34:35][INFO][scripts.build_heatmap_from_file] ✓ done in 0.89s — Assis Brasil, AC
[2025-11-10 11:34:35][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:35][INFO][scripts.build_heatmap_from_file] → [3/5570] Brasiléia, AC
[2025-11-10 11:34:35][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:36][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:36][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:36][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:36][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:36][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:36][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:36][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:36][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:36][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:36][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:36][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:36][INFO][modules.addressing.resolver] GEOCODE text='Brasiléia, AC' country=BR size=1
[2025-11-10 11:34:36][INFO][modules.road.ors_mixins] GEOCODE text="Brasiléia, AC" country=BR size=1
[2025-11-10 11:34:36][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -10.98347, 'lon': -68.773106, 'label': 'Brasiléia, R., Brazil'}
[2025-11-10 11:34:36][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Brasiléia, R., Brazil'.
[2025-11-10 11:34:36][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:36][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:36][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:36][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:36][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.98347, 'lon': -68.773106, 'label': 'Brasiléia, R., Brazil'}
[2025-11-10 11:34:36][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-68.773106, -10.98347]]
[2025-11-10 11:34:40][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:34:44][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8243 ms (attempt 1)
[2025-11-10 11:34:44][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:34:44][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:34:44][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:44][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.98347, 'lon': -68.773106, 'label': 'Brasiléia, R., Brazil'}
[2025-11-10 11:34:44][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-68.773106, -10.98347]]
[2025-11-10 11:34:46][WARNING][modules.road.ors_client] HTTP POST /v2/directions/driving-car — 404 (1390 ms, attempt 1) no-route: {"error": {"code": 2010, "message": "Could not find routable point within a radius of 350.0 meters of specified coordinate 1: -68.7731060 -10.9834700."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-09T11:14:34Z", "graph_version": "3", "osm_date": "2025-11-03T01:00:00Z", "version": "9.5.0"}, "timestamp": 1762785285938}}
[2025-11-10 11:34:46][WARNING][scripts.build_heatmap_from_file] single_evaluation failed for 'Brasiléia, AC' (code=1)
[2025-11-10 11:34:46][WARNING][scripts.build_heatmap_from_file] Filtered (not written) 'Brasiléia, AC' after 10.54s due to error: single_evaluation failed for 'Brasiléia, AC' (code=1)
[2025-11-10 11:34:46][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:46][INFO][scripts.build_heatmap_from_file] → [4/5570] Bujari, AC
[2025-11-10 11:34:46][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:46][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:46][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:46][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:46][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:46][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:46][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:46][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:46][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:46][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] GEOCODE text='Bujari, AC' country=BR size=1
[2025-11-10 11:34:46][INFO][modules.road.ors_mixins] GEOCODE text="Bujari, AC" country=BR size=1
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.827082, 'lon': -67.948456, 'label': 'Bujari, R., Brazil'}
[2025-11-10 11:34:46][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Bujari, R., Brazil'.
[2025-11-10 11:34:46][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:46][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:46][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.827082, 'lon': -67.948456, 'label': 'Bujari, R., Brazil'}
[2025-11-10 11:34:46][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-67.948456, -9.827082]]
[2025-11-10 11:34:46][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3605533.4m dur=189416s
[2025-11-10 11:34:46][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:46][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3605.5334, liters_empty=0.0000, liters_total=3605.5334
[2025-11-10 11:34:46][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3605.5334, fuel_cost_brl=21957.70, co2e_total_kg=9662.830, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:46][INFO][modules.app.evaluator] road_leg: km=3605.533 liters=3605.533 fuel_kg=3028.648 co2e=9662.830 cost=21957.70
[2025-11-10 11:34:46][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:46][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1148.415 km via centroid.
[2025-11-10 11:34:46][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1148.415 km).
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:46][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:46][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:46][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:46][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:46][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:46][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:46][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:46][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:46][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:46][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:46][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:46][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.827082, 'lon': -67.948456, 'label': 'Bujari, R., Brazil'}
[2025-11-10 11:34:46][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-67.948456, -9.827082]]
[2025-11-10 11:34:46][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1427420.6m dur=113910s
[2025-11-10 11:34:46][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:46][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1427.4206, liters_empty=0.0000, liters_total=1427.4206
[2025-11-10 11:34:46][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1427.4206, fuel_cost_brl=8692.99, co2e_total_kg=3825.487, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:46][INFO][modules.app.evaluator] road_leg: km=1427.421 liters=1427.421 fuel_kg=1199.033 co2e=3825.487 cost=8692.99
[2025-11-10 11:34:46][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=9662.830 kg, CABOTAGE CO2e=6042.730 kg (Δ=-3620.099 kg).
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] CSV+ Bujari, AC,-10742.240774664595,-3620.0993278402175
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] ✓ done in 0.90s — Bujari, AC
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] → [5/5570] Capixaba, AC
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:47][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:47][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:47][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:47][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:47][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:47][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:47][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:47][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:47][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] GEOCODE text='Capixaba, AC' country=BR size=1
[2025-11-10 11:34:47][INFO][modules.road.ors_mixins] GEOCODE text="Capixaba, AC" country=BR size=1
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -10.569186, 'lon': -67.674444, 'label': 'Capixaba, R., Brazil'}
[2025-11-10 11:34:47][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Capixaba, R., Brazil'.
[2025-11-10 11:34:47][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:47][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:47][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.569186, 'lon': -67.674444, 'label': 'Capixaba, R., Brazil'}
[2025-11-10 11:34:47][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-67.674444, -10.569186]]
[2025-11-10 11:34:47][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3625384.9m dur=189875s
[2025-11-10 11:34:47][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:47][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3625.3849, liters_empty=0.0000, liters_total=3625.3849
[2025-11-10 11:34:47][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3625.3849, fuel_cost_brl=22078.59, co2e_total_kg=9716.032, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:47][INFO][modules.app.evaluator] road_leg: km=3625.385 liters=3625.385 fuel_kg=3045.323 co2e=9716.032 cost=22078.59
[2025-11-10 11:34:47][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:47][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1180.952 km via centroid.
[2025-11-10 11:34:47][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1180.952 km).
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:47][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:47][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:47][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:47][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:47][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:47][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:47][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:47][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:47][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:47][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:47][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:47][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.569186, 'lon': -67.674444, 'label': 'Capixaba, R., Brazil'}
[2025-11-10 11:34:47][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-67.674444, -10.569186]]
[2025-11-10 11:34:47][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1447272.1m dur=114369s
[2025-11-10 11:34:47][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:47][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1447.2721, liters_empty=0.0000, liters_total=1447.2721
[2025-11-10 11:34:47][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1447.2721, fuel_cost_brl=8813.89, co2e_total_kg=3878.689, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:47][INFO][modules.app.evaluator] road_leg: km=1447.272 liters=1447.272 fuel_kg=1215.709 co2e=3878.689 cost=8813.89
[2025-11-10 11:34:47][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=9716.032 kg, CABOTAGE CO2e=6095.932 kg (Δ=-3620.099 kg).
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] CSV+ Capixaba, AC,-10742.240774664597,-3620.0993278402184
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] ✓ done in 0.89s — Capixaba, AC
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] → [6/5570] Cruzeiro do Sul, AC
[2025-11-10 11:34:47][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:48][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:48][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:48][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:48][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:48][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:48][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:48][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:48][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:48][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] GEOCODE text='Cruzeiro do Sul, AC' country=BR size=1
[2025-11-10 11:34:48][INFO][modules.road.ors_mixins] GEOCODE text="Cruzeiro do Sul, AC" country=BR size=1
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -7.611057, 'lon': -72.682291, 'label': 'Cruzeiro do Sul, R., Brazil'}
[2025-11-10 11:34:48][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Cruzeiro do Sul, R., Brazil'.
[2025-11-10 11:34:48][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:48][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:48][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -7.611057, 'lon': -72.682291, 'label': 'Cruzeiro do Sul, R., Brazil'}
[2025-11-10 11:34:48][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-72.682291, -7.611057]]
[2025-11-10 11:34:48][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=4219268.5m dur=226591s
[2025-11-10 11:34:48][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:48][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=4219.2685, liters_empty=0.0000, liters_total=4219.2685
[2025-11-10 11:34:48][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=4219.2685, fuel_cost_brl=25695.35, co2e_total_kg=11307.640, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:48][INFO][modules.app.evaluator] road_leg: km=4219.269 liters=4219.269 fuel_kg=3544.186 co2e=11307.640 cost=25695.35
[2025-11-10 11:34:48][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:48][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1487.602 km via centroid.
[2025-11-10 11:34:48][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1487.602 km).
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:48][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:48][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:48][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:48][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:48][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:48][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:48][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:48][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:48][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:48][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:48][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -7.611057, 'lon': -72.682291, 'label': 'Cruzeiro do Sul, R., Brazil'}
[2025-11-10 11:34:48][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-72.682291, -7.611057]]
[2025-11-10 11:34:48][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=2041155.7m dur=151084s
[2025-11-10 11:34:48][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:48][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2041.1557, liters_empty=0.0000, liters_total=2041.1557
[2025-11-10 11:34:48][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2041.1557, fuel_cost_brl=12430.64, co2e_total_kg=5470.297, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:48][INFO][modules.app.evaluator] road_leg: km=2041.156 liters=2041.156 fuel_kg=1714.571 co2e=5470.297 cost=12430.64
[2025-11-10 11:34:48][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=11307.640 kg, CABOTAGE CO2e=7687.540 kg (Δ=-3620.099 kg).
[2025-11-10 11:34:48][INFO][scripts.build_heatmap_from_file] CSV+ Cruzeiro do Sul, AC,-10742.240774664595,-3620.0993278402184
[2025-11-10 11:34:48][INFO][scripts.build_heatmap_from_file] ✓ done in 0.88s — Cruzeiro do Sul, AC
[2025-11-10 11:34:48][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:48][INFO][scripts.build_heatmap_from_file] → [7/5570] Epitaciolândia, AC
[2025-11-10 11:34:48][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:49][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:49][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:49][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:49][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:49][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:49][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:49][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:49][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:49][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] GEOCODE text='Epitaciolândia, AC' country=BR size=1
[2025-11-10 11:34:49][INFO][modules.road.ors_mixins] GEOCODE text="Epitaciolândia, AC" country=BR size=1
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -11.024659, 'lon': -68.718695, 'label': 'Epitaciolândia, R., Brazil'}
[2025-11-10 11:34:49][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Epitaciolândia, R., Brazil'.
[2025-11-10 11:34:49][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:49][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:49][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -11.024659, 'lon': -68.718695, 'label': 'Epitaciolândia, R., Brazil'}
[2025-11-10 11:34:49][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-68.718695, -11.024659]]
[2025-11-10 11:34:49][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3771185.0m dur=197612s
[2025-11-10 11:34:49][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:49][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3771.1850, liters_empty=0.0000, liters_total=3771.1850
[2025-11-10 11:34:49][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3771.1850, fuel_cost_brl=22966.52, co2e_total_kg=10106.776, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:49][INFO][modules.app.evaluator] road_leg: km=3771.185 liters=3771.185 fuel_kg=3167.795 co2e=10106.776 cost=22966.52
[2025-11-10 11:34:49][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:49][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1299.134 km via centroid.
[2025-11-10 11:34:49][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1299.134 km).
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:49][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:49][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:49][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:49][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:49][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:49][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:49][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:49][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:49][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:49][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:49][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:49][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -11.024659, 'lon': -68.718695, 'label': 'Epitaciolândia, R., Brazil'}
[2025-11-10 11:34:49][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-68.718695, -11.024659]]
[2025-11-10 11:34:49][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1593072.1m dur=122106s
[2025-11-10 11:34:49][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:49][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1593.0721, liters_empty=0.0000, liters_total=1593.0721
[2025-11-10 11:34:49][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1593.0721, fuel_cost_brl=9701.81, co2e_total_kg=4269.433, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:49][INFO][modules.app.evaluator] road_leg: km=1593.072 liters=1593.072 fuel_kg=1338.181 co2e=4269.433 cost=9701.81
[2025-11-10 11:34:49][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=10106.776 kg, CABOTAGE CO2e=6486.676 kg (Δ=-3620.100 kg).
[2025-11-10 11:34:49][INFO][scripts.build_heatmap_from_file] CSV+ Epitaciolândia, AC,-10742.241383664594,-3620.099595840218
[2025-11-10 11:34:49][INFO][scripts.build_heatmap_from_file] ✓ done in 0.87s — Epitaciolândia, AC
[2025-11-10 11:34:49][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:49][INFO][scripts.build_heatmap_from_file] → [8/5570] Feijó, AC
[2025-11-10 11:34:49][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:50][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:50][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:50][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:50][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:50][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:50][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:50][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:50][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:50][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] GEOCODE text='Feijó, AC' country=BR size=1
[2025-11-10 11:34:50][INFO][modules.road.ors_mixins] GEOCODE text="Feijó, AC" country=BR size=1
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -8.17497, 'lon': -70.347807, 'label': 'Feijó, R., Brazil'}
[2025-11-10 11:34:50][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Feijó, R., Brazil'.
[2025-11-10 11:34:50][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:50][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:50][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.17497, 'lon': -70.347807, 'label': 'Feijó, R., Brazil'}
[2025-11-10 11:34:50][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-70.347807, -8.17497]]
[2025-11-10 11:34:50][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3944129.0m dur=209957s
[2025-11-10 11:34:50][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:50][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3944.1290, liters_empty=0.0000, liters_total=3944.1290
[2025-11-10 11:34:50][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3944.1290, fuel_cost_brl=24019.75, co2e_total_kg=10570.266, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:50][INFO][modules.app.evaluator] road_leg: km=3944.129 liters=3944.129 fuel_kg=3313.068 co2e=10570.266 cost=24019.75
[2025-11-10 11:34:50][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:50][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1272.599 km via centroid.
[2025-11-10 11:34:50][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1272.599 km).
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:50][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:50][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:50][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:50][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:50][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:50][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:50][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:50][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:50][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:50][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:50][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:50][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.17497, 'lon': -70.347807, 'label': 'Feijó, R., Brazil'}
[2025-11-10 11:34:50][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-70.347807, -8.17497]]
[2025-11-10 11:34:50][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1766016.1m dur=134450s
[2025-11-10 11:34:50][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:50][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1766.0161, liters_empty=0.0000, liters_total=1766.0161
[2025-11-10 11:34:50][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1766.0161, fuel_cost_brl=10755.04, co2e_total_kg=4732.923, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:50][INFO][modules.app.evaluator] road_leg: km=1766.016 liters=1766.016 fuel_kg=1483.454 co2e=4732.923 cost=10755.04
[2025-11-10 11:34:50][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=10570.266 kg, CABOTAGE CO2e=6950.166 kg (Δ=-3620.100 kg).
[2025-11-10 11:34:50][INFO][scripts.build_heatmap_from_file] CSV+ Feijó, AC,-10742.241383664594,-3620.099595840218
[2025-11-10 11:34:50][INFO][scripts.build_heatmap_from_file] ✓ done in 0.88s — Feijó, AC
[2025-11-10 11:34:50][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:50][INFO][scripts.build_heatmap_from_file] → [9/5570] Jordão, AC
[2025-11-10 11:34:50][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:51][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:51][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:51][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:51][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:51][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:51][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:51][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:51][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:51][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] GEOCODE text='Jordão, AC' country=BR size=1
[2025-11-10 11:34:51][INFO][modules.road.ors_mixins] GEOCODE text="Jordão, AC" country=BR size=1
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -22.721797, 'lon': -45.565887, 'label': 'Campos do Jordao, SP, Brazil'}
[2025-11-10 11:34:51][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Campos do Jordao, SP, Brazil'.
[2025-11-10 11:34:51][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:51][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=SP → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=False
[2025-11-10 11:34:51][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=False).
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -22.721797, 'lon': -45.565887, 'label': 'Campos do Jordao, SP, Brazil'}
[2025-11-10 11:34:51][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-45.565887, -22.721797]]
[2025-11-10 11:34:51][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=196486.7m dur=12039s
[2025-11-10 11:34:51][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:51][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=196.4867, liters_empty=0.0000, liters_total=196.4867
[2025-11-10 11:34:51][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=196.4867, fuel_cost_brl=1196.60, co2e_total_kg=526.584, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:51][INFO][modules.app.evaluator] road_leg: km=196.487 liters=196.487 fuel_kg=165.049 co2e=526.584 cost=1196.60
[2025-11-10 11:34:51][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:51][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='São Sebastião' (UF=SP) distance=121.984 km via gate 'Gate'.
[2025-11-10 11:34:51][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='São Sebastião' (121.984 km).
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:51][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:51][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:51][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:51][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:51][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:51][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:51][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'São Sebastião' → 112.906 km
[2025-11-10 11:34:51][INFO][modules.app.evaluator] Sea leg: km=112.906 fuel=15.242 kg CO2e=48.867 cost=48.78.
[2025-11-10 11:34:51][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:51][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:51][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=38.716 kg → total=130.460 kg
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.808154673463267, 'lon': -45.39974141587111, 'label': 'São Sebastião gate'}
[2025-11-10 11:34:51][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -22.721797, 'lon': -45.565887, 'label': 'Campos do Jordao, SP, Brazil'}
[2025-11-10 11:34:51][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-45.39974141587111, -23.808154673463267], [-45.565887, -22.721797]]
[2025-11-10 11:34:51][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=183922.5m dur=12125s
[2025-11-10 11:34:51][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:51][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=183.9225, liters_empty=0.0000, liters_total=183.9225
[2025-11-10 11:34:51][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=183.9225, fuel_cost_brl=1120.09, co2e_total_kg=492.912, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:51][INFO][modules.app.evaluator] road_leg: km=183.923 liters=183.923 fuel_kg=154.495 co2e=492.912 cost=1120.09
[2025-11-10 11:34:51][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=526.584 kg, CABOTAGE CO2e=1202.820 kg (Δ=676.235 kg).
[2025-11-10 11:34:51][INFO][scripts.build_heatmap_from_file] CSV+ Jordão, AC,941.4356311279773,676.2353871369671
[2025-11-10 11:34:51][INFO][scripts.build_heatmap_from_file] ✓ done in 0.85s — Jordão, AC
[2025-11-10 11:34:51][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:51][INFO][scripts.build_heatmap_from_file] → [10/5570] Manoel Urbano, AC
[2025-11-10 11:34:51][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:52][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:52][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:52][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:52][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:52][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:52][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:52][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:52][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:52][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] GEOCODE text='Manoel Urbano, AC' country=BR size=1
[2025-11-10 11:34:52][INFO][modules.road.ors_mixins] GEOCODE text="Manoel Urbano, AC" country=BR size=1
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -8.834357, 'lon': -69.260985, 'label': 'Manoel Urbano, R., Brazil'}
[2025-11-10 11:34:52][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Manoel Urbano, R., Brazil'.
[2025-11-10 11:34:52][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:52][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:52][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.834357, 'lon': -69.260985, 'label': 'Manoel Urbano, R., Brazil'}
[2025-11-10 11:34:52][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-69.260985, -8.834357]]
[2025-11-10 11:34:52][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3808542.3m dur=201703s
[2025-11-10 11:34:52][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:52][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3808.5423, liters_empty=0.0000, liters_total=3808.5423
[2025-11-10 11:34:52][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3808.5423, fuel_cost_brl=23194.02, co2e_total_kg=10206.893, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:52][INFO][modules.app.evaluator] road_leg: km=3808.542 liters=3808.542 fuel_kg=3199.176 co2e=10206.893 cost=23194.02
[2025-11-10 11:34:52][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:52][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1201.975 km via centroid.
[2025-11-10 11:34:52][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1201.975 km).
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:52][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:52][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:52][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:52][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:52][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:52][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:52][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:52][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:52][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:52][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:52][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.834357, 'lon': -69.260985, 'label': 'Manoel Urbano, R., Brazil'}
[2025-11-10 11:34:52][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-69.260985, -8.834357]]
[2025-11-10 11:34:52][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1630429.5m dur=126197s
[2025-11-10 11:34:52][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:52][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1630.4295, liters_empty=0.0000, liters_total=1630.4295
[2025-11-10 11:34:52][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1630.4295, fuel_cost_brl=9929.32, co2e_total_kg=4369.551, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:52][INFO][modules.app.evaluator] road_leg: km=1630.429 liters=1630.429 fuel_kg=1369.561 co2e=4369.551 cost=9929.32
[2025-11-10 11:34:52][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=10206.893 kg, CABOTAGE CO2e=6586.794 kg (Δ=-3620.099 kg).
[2025-11-10 11:34:52][INFO][scripts.build_heatmap_from_file] CSV+ Manoel Urbano, AC,-10742.240774664591,-3620.0993278402175
[2025-11-10 11:34:52][INFO][scripts.build_heatmap_from_file] ✓ done in 0.86s — Manoel Urbano, AC
[2025-11-10 11:34:52][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:52][INFO][scripts.build_heatmap_from_file] → [11/5570] Marechal Thaumaturgo, AC
[2025-11-10 11:34:52][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:53][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:53][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:53][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:53][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:53][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:53][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:53][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:53][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:53][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:53][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:53][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:53][INFO][modules.addressing.resolver] GEOCODE text='Marechal Thaumaturgo, AC' country=BR size=1
[2025-11-10 11:34:53][INFO][modules.road.ors_mixins] GEOCODE text="Marechal Thaumaturgo, AC" country=BR size=1
[2025-11-10 11:34:53][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -8.946884, 'lon': -72.789938, 'label': 'Marechal Thaumaturgo, R., Brazil'}
[2025-11-10 11:34:53][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Marechal Thaumaturgo, R., Brazil'.
[2025-11-10 11:34:53][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:53][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:53][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:53][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:53][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.946884, 'lon': -72.789938, 'label': 'Marechal Thaumaturgo, R., Brazil'}
[2025-11-10 11:34:53][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-72.789938, -8.946884]]
[2025-11-10 11:34:54][WARNING][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — 404 (1405 ms, attempt 1) no-route: {"error": {"code": 2010, "message": "Could not find routable point within a radius of 350.0 meters of specified coordinate 1: -72.7899380 -8.9468840."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-04T13:59:57Z", "graph_version": "3", "osm_date": "2025-10-27T00:59:56Z", "version": "9.5.0"}, "timestamp": 1762785294349}}
[2025-11-10 11:34:54][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (No route for /v2/directions/driving-hgv: {"error": {"code": 2010, "message": "Could not find routable point within a radius of 350.0 meters of specified coordinate 1: -72.7899380 -8.9468840."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-04T13:59:57Z", "graph_version": "3", "osm_date": "2025-10-27T00:59:56Z", "version": "9.5.0"}, "timestamp": 1762785294349}}).
[2025-11-10 11:34:54][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:34:54][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:54][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.946884, 'lon': -72.789938, 'label': 'Marechal Thaumaturgo, R., Brazil'}
[2025-11-10 11:34:54][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-72.789938, -8.946884]]
[2025-11-10 11:34:54][WARNING][modules.road.ors_client] HTTP POST /v2/directions/driving-car — 404 (281 ms, attempt 1) no-route: {"error": {"code": 2010, "message": "Could not find routable point within a radius of 350.0 meters of specified coordinate 1: -72.7899380 -8.9468840."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-09T11:14:34Z", "graph_version": "3", "osm_date": "2025-11-03T01:00:00Z", "version": "9.5.0"}, "timestamp": 1762785294631}}
[2025-11-10 11:34:54][WARNING][scripts.build_heatmap_from_file] single_evaluation failed for 'Marechal Thaumaturgo, AC' (code=1)
[2025-11-10 11:34:54][WARNING][scripts.build_heatmap_from_file] Filtered (not written) 'Marechal Thaumaturgo, AC' after 2.54s due to error: single_evaluation failed for 'Marechal Thaumaturgo, AC' (code=1)
[2025-11-10 11:34:54][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:54][INFO][scripts.build_heatmap_from_file] → [12/5570] Mâncio Lima, AC
[2025-11-10 11:34:54][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:55][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:55][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:55][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:55][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:55][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:55][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:55][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:55][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:55][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] GEOCODE text='Mâncio Lima, AC' country=BR size=1
[2025-11-10 11:34:55][INFO][modules.road.ors_mixins] GEOCODE text="Mâncio Lima, AC" country=BR size=1
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -7.612346, 'lon': -72.911204, 'label': 'Mâncio Lima, R., Brazil'}
[2025-11-10 11:34:55][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Mâncio Lima, R., Brazil'.
[2025-11-10 11:34:55][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:55][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:55][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -7.612346, 'lon': -72.911204, 'label': 'Mâncio Lima, R., Brazil'}
[2025-11-10 11:34:55][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-72.911204, -7.612346]]
[2025-11-10 11:34:55][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=4242647.2m dur=228234s
[2025-11-10 11:34:55][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:55][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=4242.6472, liters_empty=0.0000, liters_total=4242.6472
[2025-11-10 11:34:55][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=4242.6472, fuel_cost_brl=25837.72, co2e_total_kg=11370.294, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:55][INFO][modules.app.evaluator] road_leg: km=4242.647 liters=4242.647 fuel_kg=3563.824 co2e=11370.294 cost=25837.72
[2025-11-10 11:34:55][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:55][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1511.559 km via centroid.
[2025-11-10 11:34:55][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1511.559 km).
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:55][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:55][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:55][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:55][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:55][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:55][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:55][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:55][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:55][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:55][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:55][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:55][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -7.612346, 'lon': -72.911204, 'label': 'Mâncio Lima, R., Brazil'}
[2025-11-10 11:34:55][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-72.911204, -7.612346]]
[2025-11-10 11:34:55][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=2064534.4m dur=152728s
[2025-11-10 11:34:55][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:55][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2064.5344, liters_empty=0.0000, liters_total=2064.5344
[2025-11-10 11:34:55][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2064.5344, fuel_cost_brl=12573.01, co2e_total_kg=5532.952, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:55][INFO][modules.app.evaluator] road_leg: km=2064.534 liters=2064.534 fuel_kg=1734.209 co2e=5532.952 cost=12573.01
[2025-11-10 11:34:55][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=11370.294 kg, CABOTAGE CO2e=7750.195 kg (Δ=-3620.099 kg).
[2025-11-10 11:34:55][INFO][scripts.build_heatmap_from_file] CSV+ Mâncio Lima, AC,-10742.240774664597,-3620.0993278402193
[2025-11-10 11:34:55][INFO][scripts.build_heatmap_from_file] ✓ done in 0.88s — Mâncio Lima, AC
[2025-11-10 11:34:55][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:55][INFO][scripts.build_heatmap_from_file] → [13/5570] Plácido de Castro, AC
[2025-11-10 11:34:55][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:56][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:56][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:56][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:56][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:56][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:56][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:56][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:56][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:56][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] GEOCODE text='Plácido de Castro, AC' country=BR size=1
[2025-11-10 11:34:56][INFO][modules.road.ors_mixins] GEOCODE text="Plácido de Castro, AC" country=BR size=1
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -10.307027, 'lon': -67.197808, 'label': 'Plácido de Castro, R., Brazil'}
[2025-11-10 11:34:56][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Plácido de Castro, R., Brazil'.
[2025-11-10 11:34:56][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:56][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:34:56][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.307027, 'lon': -67.197808, 'label': 'Plácido de Castro, R., Brazil'}
[2025-11-10 11:34:56][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-67.197808, -10.307027]]
[2025-11-10 11:34:56][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3534798.0m dur=185955s
[2025-11-10 11:34:56][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:56][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3534.7980, liters_empty=0.0000, liters_total=3534.7980
[2025-11-10 11:34:56][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3534.7980, fuel_cost_brl=21526.92, co2e_total_kg=9473.259, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:56][INFO][modules.app.evaluator] road_leg: km=3534.798 liters=3534.798 fuel_kg=2969.230 co2e=9473.259 cost=21526.92
[2025-11-10 11:34:56][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:56][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1123.245 km via centroid.
[2025-11-10 11:34:56][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1123.245 km).
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:56][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:56][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:56][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:56][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:56][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:56][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:34:56][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:56][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:56][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:56][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:56][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:56][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.307027, 'lon': -67.197808, 'label': 'Plácido de Castro, R., Brazil'}
[2025-11-10 11:34:56][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-67.197808, -10.307027]]
[2025-11-10 11:34:56][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1356685.2m dur=110448s
[2025-11-10 11:34:56][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:56][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1356.6852, liters_empty=0.0000, liters_total=1356.6852
[2025-11-10 11:34:56][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1356.6852, fuel_cost_brl=8262.21, co2e_total_kg=3635.916, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:56][INFO][modules.app.evaluator] road_leg: km=1356.685 liters=1356.685 fuel_kg=1139.616 co2e=3635.916 cost=8262.21
[2025-11-10 11:34:56][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=9473.259 kg, CABOTAGE CO2e=5853.159 kg (Δ=-3620.099 kg).
[2025-11-10 11:34:57][INFO][scripts.build_heatmap_from_file] CSV+ Plácido de Castro, AC,-10742.240774664597,-3620.0993278402184
[2025-11-10 11:34:57][INFO][scripts.build_heatmap_from_file] ✓ done in 1.38s — Plácido de Castro, AC
[2025-11-10 11:34:57][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:57][INFO][scripts.build_heatmap_from_file] → [14/5570] Porto Acre, AC
[2025-11-10 11:34:57][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:58][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:34:58][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:34:58][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:34:58][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:34:58][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:34:58][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:34:58][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:34:58][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:34:58][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] GEOCODE text='Porto Acre, AC' country=BR size=1
[2025-11-10 11:34:58][INFO][modules.road.ors_mixins] GEOCODE text="Porto Acre, AC" country=BR size=1
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.596969, 'lon': -67.541076, 'label': 'Porto Acre, R., Brazil'}
[2025-11-10 11:34:58][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Porto Acre, R., Brazil'.
[2025-11-10 11:34:58][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:34:58][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AC → price_o=6.09, price_d=7.63, avg=6.8600, fallback_used=False
[2025-11-10 11:34:58][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.8600 BRL/L (fallback_used=False).
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.596969, 'lon': -67.541076, 'label': 'Porto Acre, R., Brazil'}
[2025-11-10 11:34:58][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-67.541076, -9.596969]]
[2025-11-10 11:34:58][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3642066.1m dur=191896s
[2025-11-10 11:34:58][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:58][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3642.0661, liters_empty=0.0000, liters_total=3642.0661
[2025-11-10 11:34:58][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3642.0661, fuel_cost_brl=24984.57, co2e_total_kg=9760.737, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:58][INFO][modules.app.evaluator] road_leg: km=3642.066 liters=3642.066 fuel_kg=3059.336 co2e=9760.737 cost=24984.57
[2025-11-10 11:34:58][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:34:58][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1097.758 km via centroid.
[2025-11-10 11:34:58][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1097.758 km).
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:34:58][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:34:58][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:34:58][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:58][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:34:58][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=621.46, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:58][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=621.46
[2025-11-10 11:34:58][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:34:58][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:34:58][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:34:58][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:34:58][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:34:58][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.596969, 'lon': -67.541076, 'label': 'Porto Acre, R., Brazil'}
[2025-11-10 11:34:58][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-67.541076, -9.596969]]
[2025-11-10 11:34:58][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1463953.3m dur=116390s
[2025-11-10 11:34:58][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:34:58][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1463.9533, liters_empty=0.0000, liters_total=1463.9533
[2025-11-10 11:34:58][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1463.9533, fuel_cost_brl=10042.72, co2e_total_kg=3923.395, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:34:58][INFO][modules.app.evaluator] road_leg: km=1463.953 liters=1463.953 fuel_kg=1229.721 co2e=3923.395 cost=10042.72
[2025-11-10 11:34:58][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=9760.737 kg, CABOTAGE CO2e=6140.638 kg (Δ=-3620.099 kg).
[2025-11-10 11:34:58][INFO][scripts.build_heatmap_from_file] CSV+ Porto Acre, AC,-12349.631867664595,-3620.0993278402175
[2025-11-10 11:34:58][INFO][scripts.build_heatmap_from_file] ✓ done in 1.65s — Porto Acre, AC
[2025-11-10 11:34:58][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:34:58][INFO][scripts.build_heatmap_from_file] → [15/5570] Porto Walter, AC
[2025-11-10 11:34:58][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:00][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:00][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:00][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:00][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:00][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:00][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:00][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:00][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:00][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:00][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:00][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:00][INFO][modules.addressing.resolver] GEOCODE text='Porto Walter, AC' country=BR size=1
[2025-11-10 11:35:00][INFO][modules.road.ors_mixins] GEOCODE text="Porto Walter, AC" country=BR size=1
[2025-11-10 11:35:00][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -8.266139, 'lon': -72.747047, 'label': 'Porto Walter, R., Brazil'}
[2025-11-10 11:35:00][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Porto Walter, R., Brazil'.
[2025-11-10 11:35:00][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:00][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:35:00][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:35:00][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:00][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.266139, 'lon': -72.747047, 'label': 'Porto Walter, R., Brazil'}
[2025-11-10 11:35:00][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-72.747047, -8.266139]]
[2025-11-10 11:35:04][WARNING][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — 404 (3855 ms, attempt 1) no-route: {"error": {"code": 2009, "message": "Route could not be found - Unable to find a route between points 1 (-46.7303570 -23.5588080) and 2 (-72.7470470 -8.2661390)."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-04T13:59:57Z", "graph_version": "3", "osm_date": "2025-10-27T00:59:56Z", "version": "9.5.0"}, "timestamp": 1762785303906}}
[2025-11-10 11:35:04][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (No route for /v2/directions/driving-hgv: {"error": {"code": 2009, "message": "Route could not be found - Unable to find a route between points 1 (-46.7303570 -23.5588080) and 2 (-72.7470470 -8.2661390)."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-04T13:59:57Z", "graph_version": "3", "osm_date": "2025-10-27T00:59:56Z", "version": "9.5.0"}, "timestamp": 1762785303906}}).
[2025-11-10 11:35:04][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:35:04][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:04][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.266139, 'lon': -72.747047, 'label': 'Porto Walter, R., Brazil'}
[2025-11-10 11:35:04][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-72.747047, -8.266139]]
[2025-11-10 11:35:04][WARNING][modules.road.ors_client] HTTP POST /v2/directions/driving-car — 404 (295 ms, attempt 1) no-route: {"error": {"code": 2009, "message": "Route could not be found - Unable to find a route between points 1 (-46.7303570 -23.5588080) and 2 (-72.7470470 -8.2661390)."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-09T11:14:34Z", "graph_version": "3", "osm_date": "2025-11-03T01:00:00Z", "version": "9.5.0"}, "timestamp": 1762785304198}}
[2025-11-10 11:35:04][WARNING][scripts.build_heatmap_from_file] single_evaluation failed for 'Porto Walter, AC' (code=1)
[2025-11-10 11:35:04][WARNING][scripts.build_heatmap_from_file] Filtered (not written) 'Porto Walter, AC' after 5.70s due to error: single_evaluation failed for 'Porto Walter, AC' (code=1)
[2025-11-10 11:35:04][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:04][INFO][scripts.build_heatmap_from_file] → [16/5570] Rio Branco, AC
[2025-11-10 11:35:04][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:05][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:05][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:05][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:05][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:05][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:05][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:05][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:05][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:05][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] GEOCODE text='Rio Branco, AC' country=BR size=1
[2025-11-10 11:35:05][INFO][modules.road.ors_mixins] GEOCODE text="Rio Branco, AC" country=BR size=1
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.989637, 'lon': -67.822462, 'label': 'Rio Branco, R., Brazil'}
[2025-11-10 11:35:05][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Rio Branco, R., Brazil'.
[2025-11-10 11:35:05][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:05][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:35:05][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.989637, 'lon': -67.822462, 'label': 'Rio Branco, R., Brazil'}
[2025-11-10 11:35:05][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-67.822462, -9.989637]]
[2025-11-10 11:35:05][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3584628.4m dur=188017s
[2025-11-10 11:35:05][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:05][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3584.6284, liters_empty=0.0000, liters_total=3584.6284
[2025-11-10 11:35:05][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3584.6284, fuel_cost_brl=21830.39, co2e_total_kg=9606.804, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:05][INFO][modules.app.evaluator] road_leg: km=3584.628 liters=3584.628 fuel_kg=3011.088 co2e=9606.804 cost=21830.39
[2025-11-10 11:35:05][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:05][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1149.569 km via centroid.
[2025-11-10 11:35:05][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1149.569 km).
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:05][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:05][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:05][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:05][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:05][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:05][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:35:05][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:35:05][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:35:05][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:05][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:05][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:35:05][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.989637, 'lon': -67.822462, 'label': 'Rio Branco, R., Brazil'}
[2025-11-10 11:35:05][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-67.822462, -9.989637]]
[2025-11-10 11:35:05][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1406515.6m dur=112511s
[2025-11-10 11:35:05][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:05][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1406.5156, liters_empty=0.0000, liters_total=1406.5156
[2025-11-10 11:35:05][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1406.5156, fuel_cost_brl=8565.68, co2e_total_kg=3769.462, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:05][INFO][modules.app.evaluator] road_leg: km=1406.516 liters=1406.516 fuel_kg=1181.473 co2e=3769.462 cost=8565.68
[2025-11-10 11:35:05][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=9606.804 kg, CABOTAGE CO2e=5986.705 kg (Δ=-3620.099 kg).
[2025-11-10 11:35:05][INFO][scripts.build_heatmap_from_file] CSV+ Rio Branco, AC,-10742.240774664593,-3620.0993278402184
[2025-11-10 11:35:05][INFO][scripts.build_heatmap_from_file] ✓ done in 1.36s — Rio Branco, AC
[2025-11-10 11:35:05][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:05][INFO][scripts.build_heatmap_from_file] → [17/5570] Rodrigues Alves, AC
[2025-11-10 11:35:05][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:07][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:07][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:07][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:07][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:07][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:07][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:07][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:07][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:07][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] GEOCODE text='Rodrigues Alves, AC' country=BR size=1
[2025-11-10 11:35:07][INFO][modules.road.ors_mixins] GEOCODE text="Rodrigues Alves, AC" country=BR size=1
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -7.735876, 'lon': -72.652632, 'label': 'Rodrigues Alves, R., Brazil'}
[2025-11-10 11:35:07][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Rodrigues Alves, R., Brazil'.
[2025-11-10 11:35:07][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:07][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:35:07][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -7.735876, 'lon': -72.652632, 'label': 'Rodrigues Alves, R., Brazil'}
[2025-11-10 11:35:07][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-72.652632, -7.735876]]
[2025-11-10 11:35:07][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=4206733.4m dur=225836s
[2025-11-10 11:35:07][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:07][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=4206.7334, liters_empty=0.0000, liters_total=4206.7334
[2025-11-10 11:35:07][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=4206.7334, fuel_cost_brl=25619.01, co2e_total_kg=11274.046, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:07][INFO][modules.app.evaluator] road_leg: km=4206.733 liters=4206.733 fuel_kg=3533.656 co2e=11274.046 cost=25619.01
[2025-11-10 11:35:07][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:07][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1489.040 km via centroid.
[2025-11-10 11:35:07][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1489.040 km).
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:07][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:07][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:07][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:07][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:07][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:07][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:35:07][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:35:07][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:35:07][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:07][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:07][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:35:07][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -7.735876, 'lon': -72.652632, 'label': 'Rodrigues Alves, R., Brazil'}
[2025-11-10 11:35:07][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-72.652632, -7.735876]]
[2025-11-10 11:35:07][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=2028620.5m dur=150329s
[2025-11-10 11:35:07][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:07][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2028.6205, liters_empty=0.0000, liters_total=2028.6205
[2025-11-10 11:35:07][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2028.6205, fuel_cost_brl=12354.30, co2e_total_kg=5436.703, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:07][INFO][modules.app.evaluator] road_leg: km=2028.620 liters=2028.620 fuel_kg=1704.041 co2e=5436.703 cost=12354.30
[2025-11-10 11:35:07][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=11274.046 kg, CABOTAGE CO2e=7653.946 kg (Δ=-3620.100 kg).
[2025-11-10 11:35:07][INFO][scripts.build_heatmap_from_file] CSV+ Rodrigues Alves, AC,-10742.241383664597,-3620.099595840218
[2025-11-10 11:35:07][INFO][scripts.build_heatmap_from_file] ✓ done in 1.77s — Rodrigues Alves, AC
[2025-11-10 11:35:07][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:07][INFO][scripts.build_heatmap_from_file] → [18/5570] Santa Rosa do Purus, AC
[2025-11-10 11:35:07][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:09][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:09][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:09][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:09][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:09][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:09][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:09][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:09][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:09][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:09][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:09][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:09][INFO][modules.addressing.resolver] GEOCODE text='Santa Rosa do Purus, AC' country=BR size=1
[2025-11-10 11:35:09][INFO][modules.road.ors_mixins] GEOCODE text="Santa Rosa do Purus, AC" country=BR size=1
[2025-11-10 11:35:09][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.439098, 'lon': -70.488556, 'label': 'Santa Rosa do Purus, R., Brazil'}
[2025-11-10 11:35:09][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Santa Rosa do Purus, R., Brazil'.
[2025-11-10 11:35:09][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:09][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:35:09][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:35:09][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:09][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.439098, 'lon': -70.488556, 'label': 'Santa Rosa do Purus, R., Brazil'}
[2025-11-10 11:35:09][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-70.488556, -9.439098]]
[2025-11-10 11:35:10][WARNING][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — 404 (1661 ms, attempt 1) no-route: {"error": {"code": 2010, "message": "Could not find routable point within a radius of 350.0 meters of specified coordinate 1: -70.4885560 -9.4390980."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-04T13:59:57Z", "graph_version": "3", "osm_date": "2025-10-27T00:59:56Z", "version": "9.5.0"}, "timestamp": 1762785310573}}
[2025-11-10 11:35:10][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (No route for /v2/directions/driving-hgv: {"error": {"code": 2010, "message": "Could not find routable point within a radius of 350.0 meters of specified coordinate 1: -70.4885560 -9.4390980."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-04T13:59:57Z", "graph_version": "3", "osm_date": "2025-10-27T00:59:56Z", "version": "9.5.0"}, "timestamp": 1762785310573}}).
[2025-11-10 11:35:10][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:35:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.439098, 'lon': -70.488556, 'label': 'Santa Rosa do Purus, R., Brazil'}
[2025-11-10 11:35:10][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-70.488556, -9.439098]]
[2025-11-10 11:35:11][WARNING][modules.road.ors_client] HTTP POST /v2/directions/driving-car — 404 (336 ms, attempt 1) no-route: {"error": {"code": 2010, "message": "Could not find routable point within a radius of 350.0 meters of specified coordinate 1: -70.4885560 -9.4390980."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-09T11:14:34Z", "graph_version": "3", "osm_date": "2025-11-03T01:00:00Z", "version": "9.5.0"}, "timestamp": 1762785310908}}
[2025-11-10 11:35:11][WARNING][scripts.build_heatmap_from_file] single_evaluation failed for 'Santa Rosa do Purus, AC' (code=1)
[2025-11-10 11:35:11][WARNING][scripts.build_heatmap_from_file] Filtered (not written) 'Santa Rosa do Purus, AC' after 3.57s due to error: single_evaluation failed for 'Santa Rosa do Purus, AC' (code=1)
[2025-11-10 11:35:11][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:11][INFO][scripts.build_heatmap_from_file] → [19/5570] Sena Madureira, AC
[2025-11-10 11:35:11][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:12][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:12][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:12][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:12][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:12][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:12][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:12][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:12][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:12][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] GEOCODE text='Sena Madureira, AC' country=BR size=1
[2025-11-10 11:35:12][INFO][modules.road.ors_mixins] GEOCODE text="Sena Madureira, AC" country=BR size=1
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.069732, 'lon': -68.654564, 'label': 'Sena Madureira, R., Brazil'}
[2025-11-10 11:35:12][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Sena Madureira, R., Brazil'.
[2025-11-10 11:35:12][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:12][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:35:12][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.069732, 'lon': -68.654564, 'label': 'Sena Madureira, R., Brazil'}
[2025-11-10 11:35:12][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-68.654564, -9.069732]]
[2025-11-10 11:35:12][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3722461.1m dur=196531s
[2025-11-10 11:35:12][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:12][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3722.4611, liters_empty=0.0000, liters_total=3722.4611
[2025-11-10 11:35:12][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3722.4611, fuel_cost_brl=22669.79, co2e_total_kg=9976.196, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:12][INFO][modules.app.evaluator] road_leg: km=3722.461 liters=3722.461 fuel_kg=3126.867 co2e=9976.196 cost=22669.79
[2025-11-10 11:35:12][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:12][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1159.906 km via centroid.
[2025-11-10 11:35:12][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1159.906 km).
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:12][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:12][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:12][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:12][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:12][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:12][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:35:12][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:35:12][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:35:12][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:12][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:12][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:35:12][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.069732, 'lon': -68.654564, 'label': 'Sena Madureira, R., Brazil'}
[2025-11-10 11:35:12][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-68.654564, -9.069732]]
[2025-11-10 11:35:12][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1544348.3m dur=121025s
[2025-11-10 11:35:12][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:12][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1544.3483, liters_empty=0.0000, liters_total=1544.3483
[2025-11-10 11:35:12][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1544.3483, fuel_cost_brl=9405.08, co2e_total_kg=4138.853, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:12][INFO][modules.app.evaluator] road_leg: km=1544.348 liters=1544.348 fuel_kg=1297.253 co2e=4138.853 cost=9405.08
[2025-11-10 11:35:12][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=9976.196 kg, CABOTAGE CO2e=6356.096 kg (Δ=-3620.099 kg).
[2025-11-10 11:35:12][INFO][scripts.build_heatmap_from_file] CSV+ Sena Madureira, AC,-10742.240774664593,-3620.0993278402175
[2025-11-10 11:35:12][INFO][scripts.build_heatmap_from_file] ✓ done in 1.63s — Sena Madureira, AC
[2025-11-10 11:35:12][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:12][INFO][scripts.build_heatmap_from_file] → [20/5570] Senador Guiomard, AC
[2025-11-10 11:35:12][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:13][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:13][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:13][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:13][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:13][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:13][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:13][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:13][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:13][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] GEOCODE text='Senador Guiomard, AC' country=BR size=1
[2025-11-10 11:35:13][INFO][modules.road.ors_mixins] GEOCODE text="Senador Guiomard, AC" country=BR size=1
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -10.146618, 'lon': -67.731082, 'label': 'Senador Guiomard, R., Brazil'}
[2025-11-10 11:35:13][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Senador Guiomard, R., Brazil'.
[2025-11-10 11:35:13][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:13][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:35:13][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.146618, 'lon': -67.731082, 'label': 'Senador Guiomard, R., Brazil'}
[2025-11-10 11:35:13][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-67.731082, -10.146618]]
[2025-11-10 11:35:13][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3574562.5m dur=187298s
[2025-11-10 11:35:13][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:13][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3574.5625, liters_empty=0.0000, liters_total=3574.5625
[2025-11-10 11:35:13][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3574.5625, fuel_cost_brl=21769.09, co2e_total_kg=9579.828, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:13][INFO][modules.app.evaluator] road_leg: km=3574.562 liters=3574.562 fuel_kg=3002.632 co2e=9579.828 cost=21769.09
[2025-11-10 11:35:13][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:13][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1153.587 km via centroid.
[2025-11-10 11:35:13][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1153.587 km).
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:13][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:13][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:13][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:13][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:13][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:13][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:35:13][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:35:13][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:35:13][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:13][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:13][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:35:13][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.146618, 'lon': -67.731082, 'label': 'Senador Guiomard, R., Brazil'}
[2025-11-10 11:35:13][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-67.731082, -10.146618]]
[2025-11-10 11:35:13][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1396449.7m dur=111792s
[2025-11-10 11:35:13][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:13][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1396.4497, liters_empty=0.0000, liters_total=1396.4497
[2025-11-10 11:35:13][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1396.4497, fuel_cost_brl=8504.38, co2e_total_kg=3742.485, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:13][INFO][modules.app.evaluator] road_leg: km=1396.450 liters=1396.450 fuel_kg=1173.018 co2e=3742.485 cost=8504.38
[2025-11-10 11:35:13][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=9579.828 kg, CABOTAGE CO2e=5959.728 kg (Δ=-3620.099 kg).
[2025-11-10 11:35:13][INFO][scripts.build_heatmap_from_file] CSV+ Senador Guiomard, AC,-10742.240774664597,-3620.0993278402184
[2025-11-10 11:35:13][INFO][scripts.build_heatmap_from_file] ✓ done in 0.81s — Senador Guiomard, AC
[2025-11-10 11:35:13][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:13][INFO][scripts.build_heatmap_from_file] → [21/5570] Tarauacá, AC
[2025-11-10 11:35:13][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:14][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:14][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:14][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:14][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:14][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:14][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:14][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:14][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:14][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] GEOCODE text='Tarauacá, AC' country=BR size=1
[2025-11-10 11:35:14][INFO][modules.road.ors_mixins] GEOCODE text="Tarauacá, AC" country=BR size=1
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -8.150298, 'lon': -70.787884, 'label': 'Tarauacá, R., Brazil'}
[2025-11-10 11:35:14][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Tarauacá, R., Brazil'.
[2025-11-10 11:35:14][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:14][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:35:14][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.150298, 'lon': -70.787884, 'label': 'Tarauacá, R., Brazil'}
[2025-11-10 11:35:14][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-70.787884, -8.150298]]
[2025-11-10 11:35:14][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3992818.5m dur=212906s
[2025-11-10 11:35:14][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:14][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3992.8185, liters_empty=0.0000, liters_total=3992.8185
[2025-11-10 11:35:14][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3992.8185, fuel_cost_brl=24316.26, co2e_total_kg=10700.754, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:14][INFO][modules.app.evaluator] road_leg: km=3992.818 liters=3992.818 fuel_kg=3353.968 co2e=10700.754 cost=24316.26
[2025-11-10 11:35:14][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:14][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1315.386 km via centroid.
[2025-11-10 11:35:14][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1315.386 km).
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:14][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:14][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:14][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:14][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:14][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:14][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:35:14][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:35:14][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:35:14][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:14][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:14][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:35:14][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.150298, 'lon': -70.787884, 'label': 'Tarauacá, R., Brazil'}
[2025-11-10 11:35:14][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-70.787884, -8.150298]]
[2025-11-10 11:35:14][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1814705.7m dur=137399s
[2025-11-10 11:35:14][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:14][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1814.7057, liters_empty=0.0000, liters_total=1814.7057
[2025-11-10 11:35:14][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1814.7057, fuel_cost_brl=11051.56, co2e_total_kg=4863.411, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:14][INFO][modules.app.evaluator] road_leg: km=1814.706 liters=1814.706 fuel_kg=1524.353 co2e=4863.411 cost=11051.56
[2025-11-10 11:35:14][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=10700.754 kg, CABOTAGE CO2e=7080.654 kg (Δ=-3620.099 kg).
[2025-11-10 11:35:14][INFO][scripts.build_heatmap_from_file] CSV+ Tarauacá, AC,-10742.240774664595,-3620.0993278402184
[2025-11-10 11:35:14][INFO][scripts.build_heatmap_from_file] ✓ done in 0.90s — Tarauacá, AC
[2025-11-10 11:35:14][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:14][INFO][scripts.build_heatmap_from_file] → [22/5570] Xapuri, AC
[2025-11-10 11:35:14][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:15][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:15][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:15][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:15][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:15][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:15][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:15][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:15][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:15][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] GEOCODE text='Xapuri, AC' country=BR size=1
[2025-11-10 11:35:15][INFO][modules.road.ors_mixins] GEOCODE text="Xapuri, AC" country=BR size=1
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -10.652537, 'lon': -68.503999, 'label': 'Xapuri, R., Brazil'}
[2025-11-10 11:35:15][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Xapuri, R., Brazil'.
[2025-11-10 11:35:15][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:15][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d= → price_o=6.09, price_d=6.09, avg=6.0900, fallback_used=True
[2025-11-10 11:35:15][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 6.0900 BRL/L (fallback_used=True).
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.652537, 'lon': -68.503999, 'label': 'Xapuri, R., Brazil'}
[2025-11-10 11:35:15][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-68.503999, -10.652537]]
[2025-11-10 11:35:15][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=3731789.9m dur=195663s
[2025-11-10 11:35:15][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:15][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=3731.7899, liters_empty=0.0000, liters_total=3731.7899
[2025-11-10 11:35:15][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=3731.7899, fuel_cost_brl=22726.60, co2e_total_kg=10001.197, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:15][INFO][modules.app.evaluator] road_leg: km=3731.790 liters=3731.790 fuel_kg=3134.704 co2e=10001.197 cost=22726.60
[2025-11-10 11:35:15][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:15][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Manaus' (UF=AM) distance=1254.191 km via centroid.
[2025-11-10 11:35:15][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Manaus' (1254.191 km).
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:15][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:15][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:15][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:15][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:15][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=551.70, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:15][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=551.70
[2025-11-10 11:35:15][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Manaus' → 3232.712 km
[2025-11-10 11:35:15][INFO][modules.app.evaluator] Sea leg: km=3232.712 fuel=436.416 kg CO2e=1399.150 cost=1396.53.
[2025-11-10 11:35:15][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:15][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:15][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=87.703 kg → total=179.447 kg
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -3.1567, 'lon': -60.0079, 'label': 'Manaus'}
[2025-11-10 11:35:15][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -10.652537, 'lon': -68.503999, 'label': 'Xapuri, R., Brazil'}
[2025-11-10 11:35:15][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-60.0079, -3.1567], [-68.503999, -10.652537]]
[2025-11-10 11:35:15][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=1553677.1m dur=120156s
[2025-11-10 11:35:15][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:15][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=1553.6771, liters_empty=0.0000, liters_total=1553.6771
[2025-11-10 11:35:15][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=1553.6771, fuel_cost_brl=9461.89, co2e_total_kg=4163.855, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:15][INFO][modules.app.evaluator] road_leg: km=1553.677 liters=1553.677 fuel_kg=1305.089 co2e=4163.855 cost=9461.89
[2025-11-10 11:35:15][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=10001.197 kg, CABOTAGE CO2e=6381.098 kg (Δ=-3620.099 kg).
[2025-11-10 11:35:15][INFO][scripts.build_heatmap_from_file] CSV+ Xapuri, AC,-10742.240774664593,-3620.0993278402175
[2025-11-10 11:35:15][INFO][scripts.build_heatmap_from_file] ✓ done in 0.85s — Xapuri, AC
[2025-11-10 11:35:15][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:15][INFO][scripts.build_heatmap_from_file] → [23/5570] Anadia, AL
[2025-11-10 11:35:15][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:16][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:16][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:16][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:16][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:16][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:16][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:16][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:16][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:16][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:16][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:16][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:16][INFO][modules.addressing.resolver] GEOCODE text='Anadia, AL' country=BR size=1
[2025-11-10 11:35:16][INFO][modules.road.ors_mixins] GEOCODE text="Anadia, AL" country=BR size=1
[2025-11-10 11:35:16][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.687561, 'lon': -36.306304, 'label': 'Anadia, AL, Brazil'}
[2025-11-10 11:35:16][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Anadia, AL, Brazil'.
[2025-11-10 11:35:16][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:16][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:35:16][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:35:16][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:16][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.687561, 'lon': -36.306304, 'label': 'Anadia, AL, Brazil'}
[2025-11-10 11:35:16][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.306304, -9.687561]]
[2025-11-10 11:35:20][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:35:24][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8066 ms (attempt 1)
[2025-11-10 11:35:24][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:35:24][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:35:24][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:24][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.687561, 'lon': -36.306304, 'label': 'Anadia, AL, Brazil'}
[2025-11-10 11:35:24][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.306304, -9.687561]]
[2025-11-10 11:35:24][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2366539.9m dur=114445s
[2025-11-10 11:35:24][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:24][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2366.5399, liters_empty=0.0000, liters_total=2366.5399
[2025-11-10 11:35:24][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2366.5399, fuel_cost_brl=14151.91, co2e_total_kg=6342.327, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:24][INFO][modules.app.evaluator] road_leg: km=2366.540 liters=2366.540 fuel_kg=1987.894 co2e=6342.327 cost=14151.91
[2025-11-10 11:35:24][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:24][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=63.619 km via centroid.
[2025-11-10 11:35:24][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (63.619 km).
[2025-11-10 11:35:24][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:24][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:24][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:24][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:24][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:24][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:24][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:24][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:35:24][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:35:24][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:35:24][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:24][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:24][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:35:24][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:35:24][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.687561, 'lon': -36.306304, 'label': 'Anadia, AL, Brazil'}
[2025-11-10 11:35:24][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.306304, -9.687561]]
[2025-11-10 11:35:24][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=95944.4m dur=5928s
[2025-11-10 11:35:24][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:24][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=95.9444, liters_empty=0.0000, liters_total=95.9444
[2025-11-10 11:35:24][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=95.9444, fuel_cost_brl=573.75, co2e_total_kg=257.131, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:24][INFO][modules.app.evaluator] road_leg: km=95.944 liters=95.944 fuel_kg=80.593 co2e=257.131 cost=573.75
[2025-11-10 11:35:24][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6342.327 kg, CABOTAGE CO2e=1928.566 kg (Δ=-4413.761 kg).
[2025-11-10 11:35:24][INFO][scripts.build_heatmap_from_file] CSV+ Anadia, AL,-11610.446248139324,-4413.760664489585
[2025-11-10 11:35:24][INFO][scripts.build_heatmap_from_file] ✓ done in 8.89s — Anadia, AL
[2025-11-10 11:35:24][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:24][INFO][scripts.build_heatmap_from_file] → [24/5570] Arapiraca, AL
[2025-11-10 11:35:24][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:25][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:25][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:25][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:25][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:25][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:25][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:25][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:25][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:25][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:25][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:25][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:25][INFO][modules.addressing.resolver] GEOCODE text='Arapiraca, AL' country=BR size=1
[2025-11-10 11:35:25][INFO][modules.road.ors_mixins] GEOCODE text="Arapiraca, AL" country=BR size=1
[2025-11-10 11:35:25][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.753674, 'lon': -36.65535, 'label': 'Arapiraca, AL, Brazil'}
[2025-11-10 11:35:25][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Arapiraca, AL, Brazil'.
[2025-11-10 11:35:25][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:25][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:35:25][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:35:25][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:25][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.753674, 'lon': -36.65535, 'label': 'Arapiraca, AL, Brazil'}
[2025-11-10 11:35:25][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.65535, -9.753674]]
[2025-11-10 11:35:29][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:35:33][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8056 ms (attempt 1)
[2025-11-10 11:35:33][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:35:33][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:35:33][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:33][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.753674, 'lon': -36.65535, 'label': 'Arapiraca, AL, Brazil'}
[2025-11-10 11:35:33][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.65535, -9.753674]]
[2025-11-10 11:35:33][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2337890.6m dur=112270s
[2025-11-10 11:35:33][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:33][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2337.8906, liters_empty=0.0000, liters_total=2337.8906
[2025-11-10 11:35:33][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2337.8906, fuel_cost_brl=13980.59, co2e_total_kg=6265.547, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:33][INFO][modules.app.evaluator] road_leg: km=2337.891 liters=2337.891 fuel_kg=1963.828 co2e=6265.547 cost=13980.59
[2025-11-10 11:35:33][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:33][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=102.213 km via centroid.
[2025-11-10 11:35:33][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (102.213 km).
[2025-11-10 11:35:33][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:33][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:33][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:33][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:33][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:33][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:33][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:33][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:35:33][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:35:33][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:35:33][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:33][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:33][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:35:33][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:35:33][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.753674, 'lon': -36.65535, 'label': 'Arapiraca, AL, Brazil'}
[2025-11-10 11:35:33][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.65535, -9.753674]]
[2025-11-10 11:35:33][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=152281.5m dur=9245s
[2025-11-10 11:35:33][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:33][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=152.2815, liters_empty=0.0000, liters_total=152.2815
[2025-11-10 11:35:33][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=152.2815, fuel_cost_brl=910.64, co2e_total_kg=408.114, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:33][INFO][modules.app.evaluator] road_leg: km=152.281 liters=152.281 fuel_kg=127.916 co2e=408.114 cost=910.64
[2025-11-10 11:35:33][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6265.547 kg, CABOTAGE CO2e=2079.550 kg (Δ=-4185.997 kg).
[2025-11-10 11:35:33][INFO][scripts.build_heatmap_from_file] CSV+ Arapiraca, AL,-11102.227576139325,-4185.997112489586
[2025-11-10 11:35:33][INFO][scripts.build_heatmap_from_file] ✓ done in 9.01s — Arapiraca, AL
[2025-11-10 11:35:33][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:33][INFO][scripts.build_heatmap_from_file] → [25/5570] Atalaia, AL
[2025-11-10 11:35:33][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:34][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:34][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:34][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:34][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:34][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:34][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:34][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:34][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:34][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:34][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:34][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:34][INFO][modules.addressing.resolver] GEOCODE text='Atalaia, AL' country=BR size=1
[2025-11-10 11:35:34][INFO][modules.road.ors_mixins] GEOCODE text="Atalaia, AL" country=BR size=1
[2025-11-10 11:35:34][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.515225, 'lon': -36.004894, 'label': 'Atalaia, AL, Brazil'}
[2025-11-10 11:35:34][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Atalaia, AL, Brazil'.
[2025-11-10 11:35:34][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:34][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:35:34][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:35:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.515225, 'lon': -36.004894, 'label': 'Atalaia, AL, Brazil'}
[2025-11-10 11:35:34][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.004894, -9.515225]]
[2025-11-10 11:35:38][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:35:42][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8028 ms (attempt 1)
[2025-11-10 11:35:42][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:35:42][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:35:42][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:42][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.515225, 'lon': -36.004894, 'label': 'Atalaia, AL, Brazil'}
[2025-11-10 11:35:42][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.004894, -9.515225]]
[2025-11-10 11:35:42][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2418323.0m dur=115550s
[2025-11-10 11:35:42][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:42][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2418.3230, liters_empty=0.0000, liters_total=2418.3230
[2025-11-10 11:35:42][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2418.3230, fuel_cost_brl=14461.57, co2e_total_kg=6481.106, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:42][INFO][modules.app.evaluator] road_leg: km=2418.323 liters=2418.323 fuel_kg=2031.391 co2e=6481.106 cost=14461.57
[2025-11-10 11:35:42][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:42][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=35.477 km via centroid.
[2025-11-10 11:35:42][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (35.477 km).
[2025-11-10 11:35:42][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:42][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:42][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:42][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:42][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:42][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:42][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:42][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:35:42][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:35:42][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:35:42][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:42][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:42][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:35:42][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:35:42][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.515225, 'lon': -36.004894, 'label': 'Atalaia, AL, Brazil'}
[2025-11-10 11:35:42][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.004894, -9.515225]]
[2025-11-10 11:35:42][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=47107.4m dur=3155s
[2025-11-10 11:35:42][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:42][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=47.1074, liters_empty=0.0000, liters_total=47.1074
[2025-11-10 11:35:42][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=47.1074, fuel_cost_brl=281.70, co2e_total_kg=126.248, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:42][INFO][modules.app.evaluator] road_leg: km=47.107 liters=47.107 fuel_kg=39.570 co2e=126.248 cost=281.70
[2025-11-10 11:35:42][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6481.106 kg, CABOTAGE CO2e=1797.683 kg (Δ=-4683.423 kg).
[2025-11-10 11:35:42][INFO][scripts.build_heatmap_from_file] CSV+ Atalaia, AL,-12212.154446139324,-4683.422532489585
[2025-11-10 11:35:42][INFO][scripts.build_heatmap_from_file] ✓ done in 8.96s — Atalaia, AL
[2025-11-10 11:35:42][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:42][INFO][scripts.build_heatmap_from_file] → [26/5570] Barra de Santo Antônio, AL
[2025-11-10 11:35:42][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:43][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:43][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:43][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:43][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:43][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:43][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:43][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:43][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:43][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:43][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:43][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:43][INFO][modules.addressing.resolver] GEOCODE text='Barra de Santo Antônio, AL' country=BR size=1
[2025-11-10 11:35:43][INFO][modules.road.ors_mixins] GEOCODE text="Barra de Santo Antônio, AL" country=BR size=1
[2025-11-10 11:35:43][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.406616, 'lon': -35.505489, 'label': 'Barra de Santo Antônio, AL, Brazil'}
[2025-11-10 11:35:43][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Barra de Santo Antônio, AL, Brazil'.
[2025-11-10 11:35:43][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:43][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:35:43][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:35:43][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:43][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.406616, 'lon': -35.505489, 'label': 'Barra de Santo Antônio, AL, Brazil'}
[2025-11-10 11:35:43][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-35.505489, -9.406616]]
[2025-11-10 11:35:47][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:35:52][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 9291 ms (attempt 1)
[2025-11-10 11:35:52][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:35:52][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:35:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.406616, 'lon': -35.505489, 'label': 'Barra de Santo Antônio, AL, Brazil'}
[2025-11-10 11:35:52][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-35.505489, -9.406616]]
[2025-11-10 11:35:52][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2474973.8m dur=119334s
[2025-11-10 11:35:52][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:52][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2474.9738, liters_empty=0.0000, liters_total=2474.9738
[2025-11-10 11:35:52][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2474.9738, fuel_cost_brl=14800.34, co2e_total_kg=6632.930, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:52][INFO][modules.app.evaluator] road_leg: km=2474.974 liters=2474.974 fuel_kg=2078.978 co2e=6632.930 cost=14800.34
[2025-11-10 11:35:52][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:35:52][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=38.583 km via centroid.
[2025-11-10 11:35:52][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (38.583 km).
[2025-11-10 11:35:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:35:52][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:35:52][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:35:52][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:52][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:35:52][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:52][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:35:52][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:35:52][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:35:52][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:35:52][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:35:52][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:35:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:35:52][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.406616, 'lon': -35.505489, 'label': 'Barra de Santo Antônio, AL, Brazil'}
[2025-11-10 11:35:52][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-35.505489, -9.406616]]
[2025-11-10 11:35:52][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=43302.4m dur=3212s
[2025-11-10 11:35:52][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:35:52][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=43.3024, liters_empty=0.0000, liters_total=43.3024
[2025-11-10 11:35:52][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=43.3024, fuel_cost_brl=258.95, co2e_total_kg=116.050, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:35:52][INFO][modules.app.evaluator] road_leg: km=43.302 liters=43.302 fuel_kg=36.374 co2e=116.050 cost=258.95
[2025-11-10 11:35:52][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6632.930 kg, CABOTAGE CO2e=1787.486 kg (Δ=-4845.444 kg).
[2025-11-10 11:35:52][INFO][scripts.build_heatmap_from_file] CSV+ Barra de Santo Antônio, AL,-12573.680130139324,-4845.444076489584
[2025-11-10 11:35:52][INFO][scripts.build_heatmap_from_file] ✓ done in 10.23s — Barra de Santo Antônio, AL
[2025-11-10 11:35:52][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:52][INFO][scripts.build_heatmap_from_file] → [27/5570] Barra de São Miguel, AL
[2025-11-10 11:35:52][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:35:53][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:35:53][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:35:53][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:35:53][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:35:53][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:35:53][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:35:53][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:35:53][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:35:53][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:35:53][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:35:53][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:53][INFO][modules.addressing.resolver] GEOCODE text='Barra de São Miguel, AL' country=BR size=1
[2025-11-10 11:35:53][INFO][modules.road.ors_mixins] GEOCODE text="Barra de São Miguel, AL" country=BR size=1
[2025-11-10 11:35:53][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.827051, 'lon': -35.887907, 'label': 'Barra de São Miguel, AL, Brazil'}
[2025-11-10 11:35:53][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Barra de São Miguel, AL, Brazil'.
[2025-11-10 11:35:53][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:35:53][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:35:53][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:35:53][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:35:53][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.827051, 'lon': -35.887907, 'label': 'Barra de São Miguel, AL, Brazil'}
[2025-11-10 11:35:53][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-35.887907, -9.827051]]
[2025-11-10 11:35:57][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:36:01][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8087 ms (attempt 1)
[2025-11-10 11:36:01][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:36:01][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:36:01][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:01][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.827051, 'lon': -35.887907, 'label': 'Barra de São Miguel, AL, Brazil'}
[2025-11-10 11:36:01][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-35.887907, -9.827051]]
[2025-11-10 11:36:01][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2405714.7m dur=115047s
[2025-11-10 11:36:01][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:01][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2405.7147, liters_empty=0.0000, liters_total=2405.7147
[2025-11-10 11:36:01][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2405.7147, fuel_cost_brl=14386.17, co2e_total_kg=6447.315, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:01][INFO][modules.app.evaluator] road_leg: km=2405.715 liters=2405.715 fuel_kg=2020.800 co2e=6447.315 cost=14386.17
[2025-11-10 11:36:01][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:36:01][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=24.356 km via centroid.
[2025-11-10 11:36:01][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (24.356 km).
[2025-11-10 11:36:01][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:01][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:36:01][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:36:01][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:36:01][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:01][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:36:01][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:01][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:36:01][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:36:01][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:36:01][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:36:01][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:36:01][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:36:01][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:36:01][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.827051, 'lon': -35.887907, 'label': 'Barra de São Miguel, AL, Brazil'}
[2025-11-10 11:36:01][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-35.887907, -9.827051]]
[2025-11-10 11:36:01][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=32640.1m dur=2004s
[2025-11-10 11:36:01][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:01][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=32.6401, liters_empty=0.0000, liters_total=32.6401
[2025-11-10 11:36:01][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=32.6401, fuel_cost_brl=195.19, co2e_total_kg=87.475, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:01][INFO][modules.app.evaluator] road_leg: km=32.640 liters=32.640 fuel_kg=27.418 co2e=87.475 cost=195.19
[2025-11-10 11:36:01][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6447.315 kg, CABOTAGE CO2e=1758.911 kg (Δ=-4688.405 kg).
[2025-11-10 11:36:01][INFO][scripts.build_heatmap_from_file] CSV+ Barra de São Miguel, AL,-12223.271266139325,-4688.404652489585
[2025-11-10 11:36:01][INFO][scripts.build_heatmap_from_file] ✓ done in 9.01s — Barra de São Miguel, AL
[2025-11-10 11:36:01][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:01][INFO][scripts.build_heatmap_from_file] → [28/5570] Batalha, AL
[2025-11-10 11:36:01][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:02][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:36:02][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:36:02][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:36:02][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:36:02][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:36:02][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:36:02][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:36:02][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:36:02][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:36:02][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:36:02][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:02][INFO][modules.addressing.resolver] GEOCODE text='Batalha, AL' country=BR size=1
[2025-11-10 11:36:02][INFO][modules.road.ors_mixins] GEOCODE text="Batalha, AL" country=BR size=1
[2025-11-10 11:36:02][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.67271, 'lon': -37.125324, 'label': 'Batalha, AL, Brazil'}
[2025-11-10 11:36:02][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Batalha, AL, Brazil'.
[2025-11-10 11:36:02][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:36:02][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:36:02][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:36:02][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:02][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.67271, 'lon': -37.125324, 'label': 'Batalha, AL, Brazil'}
[2025-11-10 11:36:02][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-37.125324, -9.67271]]
[2025-11-10 11:36:06][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:36:10][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8048 ms (attempt 1)
[2025-11-10 11:36:10][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:36:10][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:36:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.67271, 'lon': -37.125324, 'label': 'Batalha, AL, Brazil'}
[2025-11-10 11:36:10][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-37.125324, -9.67271]]
[2025-11-10 11:36:10][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2361003.3m dur=114619s
[2025-11-10 11:36:10][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:10][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2361.0033, liters_empty=0.0000, liters_total=2361.0033
[2025-11-10 11:36:10][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2361.0033, fuel_cost_brl=14118.80, co2e_total_kg=6327.489, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:10][INFO][modules.app.evaluator] road_leg: km=2361.003 liters=2361.003 fuel_kg=1983.243 co2e=6327.489 cost=14118.80
[2025-11-10 11:36:10][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:36:10][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=153.386 km via centroid.
[2025-11-10 11:36:10][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (153.386 km).
[2025-11-10 11:36:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:36:10][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:36:10][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:36:10][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:10][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:36:10][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:10][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:36:10][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:36:10][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:36:10][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:36:10][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:36:10][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:36:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:36:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.67271, 'lon': -37.125324, 'label': 'Batalha, AL, Brazil'}
[2025-11-10 11:36:10][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-37.125324, -9.67271]]
[2025-11-10 11:36:10][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=192319.7m dur=11103s
[2025-11-10 11:36:10][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:10][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=192.3197, liters_empty=0.0000, liters_total=192.3197
[2025-11-10 11:36:10][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=192.3197, fuel_cost_brl=1150.07, co2e_total_kg=515.417, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:10][INFO][modules.app.evaluator] road_leg: km=192.320 liters=192.320 fuel_kg=161.549 co2e=515.417 cost=1150.07
[2025-11-10 11:36:10][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6327.489 kg, CABOTAGE CO2e=2186.852 kg (Δ=-4140.637 kg).
[2025-11-10 11:36:10][INFO][scripts.build_heatmap_from_file] CSV+ Batalha, AL,-11001.013086139323,-4140.636772489585
[2025-11-10 11:36:10][INFO][scripts.build_heatmap_from_file] ✓ done in 8.92s — Batalha, AL
[2025-11-10 11:36:10][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:10][INFO][scripts.build_heatmap_from_file] → [29/5570] Belo Monte, AL
[2025-11-10 11:36:10][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:11][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:36:11][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:36:11][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:36:11][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:36:11][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:36:11][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:36:11][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:36:11][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:36:11][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:36:11][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:36:11][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:11][INFO][modules.addressing.resolver] GEOCODE text='Belo Monte, AL' country=BR size=1
[2025-11-10 11:36:11][INFO][modules.road.ors_mixins] GEOCODE text="Belo Monte, AL" country=BR size=1
[2025-11-10 11:36:11][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.826977, 'lon': -37.278352, 'label': 'Belo Monte, AL, Brazil'}
[2025-11-10 11:36:11][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Belo Monte, AL, Brazil'.
[2025-11-10 11:36:11][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:36:11][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:36:11][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:36:11][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:11][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.826977, 'lon': -37.278352, 'label': 'Belo Monte, AL, Brazil'}
[2025-11-10 11:36:11][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-37.278352, -9.826977]]
[2025-11-10 11:36:15][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:36:19][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8136 ms (attempt 1)
[2025-11-10 11:36:19][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:36:19][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:36:19][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:19][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.826977, 'lon': -37.278352, 'label': 'Belo Monte, AL, Brazil'}
[2025-11-10 11:36:19][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-37.278352, -9.826977]]
[2025-11-10 11:36:19][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2303625.3m dur=114117s
[2025-11-10 11:36:19][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:19][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2303.6253, liters_empty=0.0000, liters_total=2303.6253
[2025-11-10 11:36:19][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2303.6253, fuel_cost_brl=13775.68, co2e_total_kg=6173.716, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:19][INFO][modules.app.evaluator] road_leg: km=2303.625 liters=2303.625 fuel_kg=1935.045 co2e=6173.716 cost=13775.68
[2025-11-10 11:36:19][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:36:19][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=170.935 km via centroid.
[2025-11-10 11:36:19][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (170.935 km).
[2025-11-10 11:36:19][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:19][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:36:19][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:36:19][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:36:19][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:19][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:36:19][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:19][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:36:19][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:36:19][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:36:19][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:36:19][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:36:19][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:36:19][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:36:19][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.826977, 'lon': -37.278352, 'label': 'Belo Monte, AL, Brazil'}
[2025-11-10 11:36:19][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-37.278352, -9.826977]]
[2025-11-10 11:36:19][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=220792.8m dur=12834s
[2025-11-10 11:36:19][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:19][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=220.7928, liters_empty=0.0000, liters_total=220.7928
[2025-11-10 11:36:19][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=220.7928, fuel_cost_brl=1320.34, co2e_total_kg=591.725, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:19][INFO][modules.app.evaluator] road_leg: km=220.793 liters=220.793 fuel_kg=185.466 co2e=591.725 cost=1320.34
[2025-11-10 11:36:19][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6173.716 kg, CABOTAGE CO2e=2263.160 kg (Δ=-3910.556 kg).
[2025-11-10 11:36:19][INFO][scripts.build_heatmap_from_file] CSV+ Belo Monte, AL,-10487.623508139324,-3910.555824489584
[2025-11-10 11:36:19][INFO][scripts.build_heatmap_from_file] ✓ done in 9.03s — Belo Monte, AL
[2025-11-10 11:36:19][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:19][INFO][scripts.build_heatmap_from_file] → [30/5570] Belém, AL
[2025-11-10 11:36:19][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:20][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:36:20][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:36:20][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:36:20][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:36:20][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:36:20][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:36:20][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:36:20][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:36:20][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:36:20][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:36:20][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:20][INFO][modules.addressing.resolver] GEOCODE text='Belém, AL' country=BR size=1
[2025-11-10 11:36:20][INFO][modules.road.ors_mixins] GEOCODE text="Belém, AL" country=BR size=1
[2025-11-10 11:36:20][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.574361, 'lon': -36.496844, 'label': 'Belém, AL, Brazil'}
[2025-11-10 11:36:20][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Belém, AL, Brazil'.
[2025-11-10 11:36:20][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:36:20][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:36:20][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:36:20][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:20][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.574361, 'lon': -36.496844, 'label': 'Belém, AL, Brazil'}
[2025-11-10 11:36:20][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.496844, -9.574361]]
[2025-11-10 11:36:24][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:36:28][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8151 ms (attempt 1)
[2025-11-10 11:36:28][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:36:28][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:36:28][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:28][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.574361, 'lon': -36.496844, 'label': 'Belém, AL, Brazil'}
[2025-11-10 11:36:28][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.496844, -9.574361]]
[2025-11-10 11:36:28][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2366129.3m dur=113769s
[2025-11-10 11:36:28][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:28][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2366.1293, liters_empty=0.0000, liters_total=2366.1293
[2025-11-10 11:36:28][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2366.1293, fuel_cost_brl=14149.45, co2e_total_kg=6341.227, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:28][INFO][modules.app.evaluator] road_leg: km=2366.129 liters=2366.129 fuel_kg=1987.549 co2e=6341.227 cost=14149.45
[2025-11-10 11:36:28][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:36:28][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=85.274 km via centroid.
[2025-11-10 11:36:28][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (85.274 km).
[2025-11-10 11:36:28][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:28][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:36:28][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:36:28][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:36:28][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:28][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:36:28][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:28][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:36:28][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:36:28][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:36:28][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:36:28][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:36:28][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:36:28][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:36:28][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.574361, 'lon': -36.496844, 'label': 'Belém, AL, Brazil'}
[2025-11-10 11:36:28][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.496844, -9.574361]]
[2025-11-10 11:36:28][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=114192.2m dur=6959s
[2025-11-10 11:36:28][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:28][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=114.1922, liters_empty=0.0000, liters_total=114.1922
[2025-11-10 11:36:28][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=114.1922, fuel_cost_brl=682.87, co2e_total_kg=306.035, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:28][INFO][modules.app.evaluator] road_leg: km=114.192 liters=114.192 fuel_kg=95.921 co2e=306.035 cost=682.87
[2025-11-10 11:36:28][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6341.227 kg, CABOTAGE CO2e=1977.470 kg (Δ=-4363.756 kg).
[2025-11-10 11:36:28][INFO][scripts.build_heatmap_from_file] CSV+ Belém, AL,-11498.869016139322,-4363.756152489585
[2025-11-10 11:36:28][INFO][scripts.build_heatmap_from_file] ✓ done in 9.07s — Belém, AL
[2025-11-10 11:36:28][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:28][INFO][scripts.build_heatmap_from_file] → [31/5570] Boca da Mata, AL
[2025-11-10 11:36:28][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:29][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:36:29][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:36:29][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:36:29][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:36:29][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:36:29][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:36:29][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:36:29][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:36:29][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:36:29][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:36:29][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:29][INFO][modules.addressing.resolver] GEOCODE text='Boca da Mata, AL' country=BR size=1
[2025-11-10 11:36:29][INFO][modules.road.ors_mixins] GEOCODE text="Boca da Mata, AL" country=BR size=1
[2025-11-10 11:36:29][ERROR][modules.addressing.resolver] Text geocoding failed for value='Boca da Mata, AL'
[2025-11-10 11:36:29][WARNING][scripts.build_heatmap_from_file] single_evaluation failed for 'Boca da Mata, AL' (code=1)
[2025-11-10 11:36:29][WARNING][scripts.build_heatmap_from_file] Filtered (not written) 'Boca da Mata, AL' after 0.81s due to error: single_evaluation failed for 'Boca da Mata, AL' (code=1)
[2025-11-10 11:36:29][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:29][INFO][scripts.build_heatmap_from_file] → [32/5570] Branquinha, AL
[2025-11-10 11:36:29][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:30][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:36:30][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:36:30][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:36:30][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:36:30][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:36:30][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:36:30][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:36:30][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:36:30][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:36:30][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:36:30][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:30][INFO][modules.addressing.resolver] GEOCODE text='Branquinha, AL' country=BR size=1
[2025-11-10 11:36:30][INFO][modules.road.ors_mixins] GEOCODE text="Branquinha, AL" country=BR size=1
[2025-11-10 11:36:30][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.247111, 'lon': -36.0122, 'label': 'Branquinha, AL, Brazil'}
[2025-11-10 11:36:30][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Branquinha, AL, Brazil'.
[2025-11-10 11:36:30][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:36:30][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:36:30][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:36:30][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:30][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.247111, 'lon': -36.0122, 'label': 'Branquinha, AL, Brazil'}
[2025-11-10 11:36:30][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.0122, -9.247111]]
[2025-11-10 11:36:34][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:36:38][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8389 ms (attempt 1)
[2025-11-10 11:36:38][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:36:38][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:36:38][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:38][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.247111, 'lon': -36.0122, 'label': 'Branquinha, AL, Brazil'}
[2025-11-10 11:36:38][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.0122, -9.247111]]
[2025-11-10 11:36:38][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2470461.4m dur=117989s
[2025-11-10 11:36:38][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:38][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2470.4614, liters_empty=0.0000, liters_total=2470.4614
[2025-11-10 11:36:38][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2470.4614, fuel_cost_brl=14773.36, co2e_total_kg=6620.837, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:38][INFO][modules.app.evaluator] road_leg: km=2470.461 liters=2470.461 fuel_kg=2075.188 co2e=6620.837 cost=14773.36
[2025-11-10 11:36:38][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:36:38][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=57.187 km via centroid.
[2025-11-10 11:36:38][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (57.187 km).
[2025-11-10 11:36:38][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:38][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:36:38][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:36:38][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:36:38][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:38][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:36:38][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:38][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:36:38][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:36:38][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:36:38][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:36:38][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:36:38][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:36:38][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:36:38][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.247111, 'lon': -36.0122, 'label': 'Branquinha, AL, Brazil'}
[2025-11-10 11:36:38][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.0122, -9.247111]]
[2025-11-10 11:36:38][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=68911.3m dur=4543s
[2025-11-10 11:36:38][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:38][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=68.9113, liters_empty=0.0000, liters_total=68.9113
[2025-11-10 11:36:38][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=68.9113, fuel_cost_brl=412.09, co2e_total_kg=184.682, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:38][INFO][modules.app.evaluator] road_leg: km=68.911 liters=68.911 fuel_kg=57.885 co2e=184.682 cost=412.09
[2025-11-10 11:36:38][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6620.837 kg, CABOTAGE CO2e=1856.118 kg (Δ=-4764.719 kg).
[2025-11-10 11:36:38][INFO][scripts.build_heatmap_from_file] CSV+ Branquinha, AL,-12393.554756139321,-4764.718992489585
[2025-11-10 11:36:38][INFO][scripts.build_heatmap_from_file] ✓ done in 9.30s — Branquinha, AL
[2025-11-10 11:36:38][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:38][INFO][scripts.build_heatmap_from_file] → [33/5570] Cacimbinhas, AL
[2025-11-10 11:36:38][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:40][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:36:40][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:36:40][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:36:40][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:36:40][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:36:40][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:36:40][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:36:40][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:36:40][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:36:40][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:36:40][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:40][INFO][modules.addressing.resolver] GEOCODE text='Cacimbinhas, AL' country=BR size=1
[2025-11-10 11:36:40][INFO][modules.road.ors_mixins] GEOCODE text="Cacimbinhas, AL" country=BR size=1
[2025-11-10 11:36:40][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.400225, 'lon': -36.990605, 'label': 'Cacimbinhas, AL, Brazil'}
[2025-11-10 11:36:40][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Cacimbinhas, AL, Brazil'.
[2025-11-10 11:36:40][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:36:40][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:36:40][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:36:40][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:40][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.400225, 'lon': -36.990605, 'label': 'Cacimbinhas, AL, Brazil'}
[2025-11-10 11:36:40][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.990605, -9.400225]]
[2025-11-10 11:36:44][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:36:48][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8560 ms (attempt 1)
[2025-11-10 11:36:48][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:36:48][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:36:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.400225, 'lon': -36.990605, 'label': 'Cacimbinhas, AL, Brazil'}
[2025-11-10 11:36:48][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.990605, -9.400225]]
[2025-11-10 11:36:48][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2370110.9m dur=114638s
[2025-11-10 11:36:48][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:48][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2370.1109, liters_empty=0.0000, liters_total=2370.1109
[2025-11-10 11:36:48][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2370.1109, fuel_cost_brl=14173.26, co2e_total_kg=6351.897, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:48][INFO][modules.app.evaluator] road_leg: km=2370.111 liters=2370.111 fuel_kg=1990.893 co2e=6351.897 cost=14173.26
[2025-11-10 11:36:48][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:36:48][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=142.048 km via centroid.
[2025-11-10 11:36:48][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (142.048 km).
[2025-11-10 11:36:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:36:48][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:36:48][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:36:48][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:48][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:36:48][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:48][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:36:48][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:36:48][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:36:48][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:36:48][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:36:48][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:36:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:36:48][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.400225, 'lon': -36.990605, 'label': 'Cacimbinhas, AL, Brazil'}
[2025-11-10 11:36:48][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.990605, -9.400225]]
[2025-11-10 11:36:48][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=177374.5m dur=10276s
[2025-11-10 11:36:48][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:36:48][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=177.3745, liters_empty=0.0000, liters_total=177.3745
[2025-11-10 11:36:48][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=177.3745, fuel_cost_brl=1060.70, co2e_total_kg=475.364, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:36:48][INFO][modules.app.evaluator] road_leg: km=177.375 liters=177.375 fuel_kg=148.995 co2e=475.364 cost=1060.70
[2025-11-10 11:36:48][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6351.897 kg, CABOTAGE CO2e=2146.799 kg (Δ=-4205.098 kg).
[2025-11-10 11:36:48][INFO][scripts.build_heatmap_from_file] CSV+ Cacimbinhas, AL,-11144.848830139326,-4205.098276489585
[2025-11-10 11:36:48][INFO][scripts.build_heatmap_from_file] ✓ done in 10.20s — Cacimbinhas, AL
[2025-11-10 11:36:48][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:48][INFO][scripts.build_heatmap_from_file] → [34/5570] Cajueiro, AL
[2025-11-10 11:36:48][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:36:49][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:36:49][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:36:49][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:36:49][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:36:49][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:36:49][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:36:49][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:36:49][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:36:49][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:36:49][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:36:49][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:49][INFO][modules.addressing.resolver] GEOCODE text='Cajueiro, AL' country=BR size=1
[2025-11-10 11:36:49][INFO][modules.road.ors_mixins] GEOCODE text="Cajueiro, AL" country=BR size=1
[2025-11-10 11:36:49][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.71667, 'lon': -36.45, 'label': 'Cajueiro, AL, Brazil'}
[2025-11-10 11:36:49][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Cajueiro, AL, Brazil'.
[2025-11-10 11:36:49][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:36:49][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:36:49][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:36:49][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:49][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.71667, 'lon': -36.45, 'label': 'Cajueiro, AL, Brazil'}
[2025-11-10 11:36:49][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.45, -9.71667]]
[2025-11-10 11:36:53][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:36:57][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8064 ms (attempt 1)
[2025-11-10 11:36:57][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:36:57][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:36:57][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:36:57][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.71667, 'lon': -36.45, 'label': 'Cajueiro, AL, Brazil'}
[2025-11-10 11:36:57][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.45, -9.71667]]
[2025-11-10 11:37:00][WARNING][modules.road.ors_client] HTTP POST /v2/directions/driving-car — 404 (3210 ms, attempt 1) no-route: {"error": {"code": 2010, "message": "Could not find routable point within a radius of 350.0 meters of specified coordinate 1: -36.4500000 -9.7166700."}, "info": {"engine": {"build_date": "2025-10-31T12:33:09Z", "graph_date": "2025-11-09T11:14:34Z", "graph_version": "3", "osm_date": "2025-11-03T01:00:00Z", "version": "9.5.0"}, "timestamp": 1762785420753}}
[2025-11-10 11:37:01][WARNING][scripts.build_heatmap_from_file] single_evaluation failed for 'Cajueiro, AL' (code=1)
[2025-11-10 11:37:01][WARNING][scripts.build_heatmap_from_file] Filtered (not written) 'Cajueiro, AL' after 12.19s due to error: single_evaluation failed for 'Cajueiro, AL' (code=1)
[2025-11-10 11:37:01][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:01][INFO][scripts.build_heatmap_from_file] → [35/5570] Campestre, AL
[2025-11-10 11:37:01][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:01][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:37:01][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:37:01][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:37:01][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:37:01][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:37:01][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:37:01][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:37:01][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:37:01][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:37:01][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:37:01][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:01][INFO][modules.addressing.resolver] GEOCODE text='Campestre, AL' country=BR size=1
[2025-11-10 11:37:01][INFO][modules.road.ors_mixins] GEOCODE text="Campestre, AL" country=BR size=1
[2025-11-10 11:37:01][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -8.851323, 'lon': -35.567702, 'label': 'Campestre, AL, Brazil'}
[2025-11-10 11:37:01][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Campestre, AL, Brazil'.
[2025-11-10 11:37:01][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:37:01][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:37:01][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:37:01][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:01][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.851323, 'lon': -35.567702, 'label': 'Campestre, AL, Brazil'}
[2025-11-10 11:37:01][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-35.567702, -8.851323]]
[2025-11-10 11:37:05][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:37:09][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8129 ms (attempt 1)
[2025-11-10 11:37:09][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:37:09][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:37:09][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:09][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.851323, 'lon': -35.567702, 'label': 'Campestre, AL, Brazil'}
[2025-11-10 11:37:09][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-35.567702, -8.851323]]
[2025-11-10 11:37:09][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2521050.8m dur=119833s
[2025-11-10 11:37:09][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:09][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2521.0508, liters_empty=0.0000, liters_total=2521.0508
[2025-11-10 11:37:09][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2521.0508, fuel_cost_brl=15075.88, co2e_total_kg=6756.416, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:09][INFO][modules.app.evaluator] road_leg: km=2521.051 liters=2521.051 fuel_kg=2117.683 co2e=6756.416 cost=15075.88
[2025-11-10 11:37:09][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:37:09][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Suape' (UF=PE) distance=82.714 km via gate 'Gate'.
[2025-11-10 11:37:09][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Suape' (82.714 km).
[2025-11-10 11:37:09][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:09][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:37:09][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:37:09][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:37:09][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:09][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:37:09][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:09][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:37:09][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Suape' → 2492.449 km
[2025-11-10 11:37:09][INFO][modules.app.evaluator] Sea leg: km=2492.449 fuel=336.481 kg CO2e=1078.757 cost=1076.74.
[2025-11-10 11:37:09][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:37:09][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:37:09][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=31.371 kg → total=123.115 kg
[2025-11-10 11:37:09][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.394046412845151, 'lon': -34.97428186936652, 'label': 'Suape gate'}
[2025-11-10 11:37:09][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -8.851323, 'lon': -35.567702, 'label': 'Campestre, AL, Brazil'}
[2025-11-10 11:37:09][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-34.97428186936652, -8.394046412845151], [-35.567702, -8.851323]]
[2025-11-10 11:37:09][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=156619.3m dur=8801s
[2025-11-10 11:37:09][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:09][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=156.6193, liters_empty=0.0000, liters_total=156.6193
[2025-11-10 11:37:09][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=156.6193, fuel_cost_brl=936.58, co2e_total_kg=419.740, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:09][INFO][modules.app.evaluator] road_leg: km=156.619 liters=156.619 fuel_kg=131.560 co2e=419.740 cost=936.58
[2025-11-10 11:37:09][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6756.416 kg, CABOTAGE CO2e=2135.990 kg (Δ=-4620.426 kg).
[2025-11-10 11:37:10][INFO][scripts.build_heatmap_from_file] CSV+ Campestre, AL,-12126.854747071986,-4620.426493207746
[2025-11-10 11:37:10][INFO][scripts.build_heatmap_from_file] ✓ done in 9.00s — Campestre, AL
[2025-11-10 11:37:10][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:10][INFO][scripts.build_heatmap_from_file] → [36/5570] Campo Alegre, AL
[2025-11-10 11:37:10][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:10][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:37:10][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:37:10][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:37:10][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:37:10][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:37:10][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:37:10][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:37:10][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:37:10][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:37:10][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:37:10][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:10][INFO][modules.addressing.resolver] GEOCODE text='Campo Alegre, AL' country=BR size=1
[2025-11-10 11:37:10][INFO][modules.road.ors_mixins] GEOCODE text="Campo Alegre, AL" country=BR size=1
[2025-11-10 11:37:10][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.782016, 'lon': -36.352286, 'label': 'Campo Alegre, AL, Brazil'}
[2025-11-10 11:37:10][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Campo Alegre, AL, Brazil'.
[2025-11-10 11:37:10][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:37:10][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:37:10][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:37:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:10][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.782016, 'lon': -36.352286, 'label': 'Campo Alegre, AL, Brazil'}
[2025-11-10 11:37:10][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.352286, -9.782016]]
[2025-11-10 11:37:14][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:37:18][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8147 ms (attempt 1)
[2025-11-10 11:37:18][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:37:18][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:37:18][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:18][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.782016, 'lon': -36.352286, 'label': 'Campo Alegre, AL, Brazil'}
[2025-11-10 11:37:18][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.352286, -9.782016]]
[2025-11-10 11:37:18][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2348871.0m dur=112656s
[2025-11-10 11:37:18][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:18][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2348.8710, liters_empty=0.0000, liters_total=2348.8710
[2025-11-10 11:37:18][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2348.8710, fuel_cost_brl=14046.25, co2e_total_kg=6294.974, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:18][INFO][modules.app.evaluator] road_leg: km=2348.871 liters=2348.871 fuel_kg=1973.052 co2e=6294.974 cost=14046.25
[2025-11-10 11:37:18][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:37:18][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=69.624 km via centroid.
[2025-11-10 11:37:18][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (69.624 km).
[2025-11-10 11:37:18][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:18][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:37:18][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:37:18][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:37:18][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:18][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:37:18][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:18][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:37:18][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:37:18][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:37:18][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:37:18][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:37:18][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:37:18][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:37:18][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.782016, 'lon': -36.352286, 'label': 'Campo Alegre, AL, Brazil'}
[2025-11-10 11:37:18][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.352286, -9.782016]]
[2025-11-10 11:37:18][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=91870.8m dur=5532s
[2025-11-10 11:37:18][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:18][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=91.8708, liters_empty=0.0000, liters_total=91.8708
[2025-11-10 11:37:18][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=91.8708, fuel_cost_brl=549.39, co2e_total_kg=246.214, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:18][INFO][modules.app.evaluator] road_leg: km=91.871 liters=91.871 fuel_kg=77.171 co2e=246.214 cost=549.39
[2025-11-10 11:37:18][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6294.974 kg, CABOTAGE CO2e=1917.649 kg (Δ=-4377.325 kg).
[2025-11-10 11:37:19][INFO][scripts.build_heatmap_from_file] CSV+ Campo Alegre, AL,-11529.146354139324,-4377.325260489585
[2025-11-10 11:37:19][INFO][scripts.build_heatmap_from_file] ✓ done in 9.05s — Campo Alegre, AL
[2025-11-10 11:37:19][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:19][INFO][scripts.build_heatmap_from_file] → [37/5570] Campo Grande, AL
[2025-11-10 11:37:19][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:19][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:37:19][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:37:19][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:37:19][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:37:19][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:37:19][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:37:19][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:37:19][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:37:19][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:37:19][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:37:19][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:19][INFO][modules.addressing.resolver] GEOCODE text='Campo Grande, AL' country=BR size=1
[2025-11-10 11:37:19][INFO][modules.road.ors_mixins] GEOCODE text="Campo Grande, AL" country=BR size=1
[2025-11-10 11:37:19][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.958962, 'lon': -36.790062, 'label': 'Campo Grande, AL, Brazil'}
[2025-11-10 11:37:19][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Campo Grande, AL, Brazil'.
[2025-11-10 11:37:19][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:37:19][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:37:19][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:37:19][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:19][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.958962, 'lon': -36.790062, 'label': 'Campo Grande, AL, Brazil'}
[2025-11-10 11:37:19][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.790062, -9.958962]]
[2025-11-10 11:37:23][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)")': /v2/directions/driving-hgv
[2025-11-10 11:37:27][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 8094 ms (attempt 1)
[2025-11-10 11:37:27][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=3.0)"))).
[2025-11-10 11:37:27][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:37:27][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:27][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.958962, 'lon': -36.790062, 'label': 'Campo Grande, AL, Brazil'}
[2025-11-10 11:37:27][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.790062, -9.958962]]
[2025-11-10 11:37:27][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2301702.5m dur=110296s
[2025-11-10 11:37:27][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:27][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2301.7025, liters_empty=0.0000, liters_total=2301.7025
[2025-11-10 11:37:27][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2301.7025, fuel_cost_brl=13764.18, co2e_total_kg=6168.563, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:27][INFO][modules.app.evaluator] road_leg: km=2301.702 liters=2301.702 fuel_kg=1933.430 co2e=6168.563 cost=13764.18
[2025-11-10 11:37:27][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:37:27][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=120.728 km via centroid.
[2025-11-10 11:37:27][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (120.728 km).
[2025-11-10 11:37:27][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:27][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:37:27][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:37:27][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:37:27][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:27][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:37:27][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:27][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:37:27][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:37:27][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:37:27][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:37:27][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:37:27][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:37:27][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:37:27][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.958962, 'lon': -36.790062, 'label': 'Campo Grande, AL, Brazil'}
[2025-11-10 11:37:27][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.790062, -9.958962]]
[2025-11-10 11:37:27][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=183947.8m dur=11122s
[2025-11-10 11:37:27][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:27][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=183.9478, liters_empty=0.0000, liters_total=183.9478
[2025-11-10 11:37:27][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=183.9478, fuel_cost_brl=1100.01, co2e_total_kg=492.980, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:27][INFO][modules.app.evaluator] road_leg: km=183.948 liters=183.948 fuel_kg=154.516 co2e=492.980 cost=1100.01
[2025-11-10 11:37:27][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6168.563 kg, CABOTAGE CO2e=2164.415 kg (Δ=-4004.147 kg).
[2025-11-10 11:37:28][INFO][scripts.build_heatmap_from_file] CSV+ Campo Grande, AL,-10696.458264139324,-4004.147320489585
[2025-11-10 11:37:28][INFO][scripts.build_heatmap_from_file] ✓ done in 8.95s — Campo Grande, AL
[2025-11-10 11:37:28][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:28][INFO][scripts.build_heatmap_from_file] → [38/5570] Canapi, AL
[2025-11-10 11:37:28][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:28][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:37:28][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:37:28][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:37:28][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:37:28][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:37:28][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:37:28][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:37:28][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:37:28][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:37:28][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:37:28][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:28][INFO][modules.addressing.resolver] GEOCODE text='Canapi, AL' country=BR size=1
[2025-11-10 11:37:28][INFO][modules.road.ors_mixins] GEOCODE text="Canapi, AL" country=BR size=1
[2025-11-10 11:37:28][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.117671, 'lon': -37.603778, 'label': 'Canapi, AL, Brazil'}
[2025-11-10 11:37:28][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Canapi, AL, Brazil'.
[2025-11-10 11:37:28][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:37:28][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:37:28][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:37:28][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:28][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.117671, 'lon': -37.603778, 'label': 'Canapi, AL, Brazil'}
[2025-11-10 11:37:28][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-37.603778, -9.117671]]
[2025-11-10 11:37:31][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=2.0)")': /v2/directions/driving-hgv
[2025-11-10 11:37:34][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 6104 ms (attempt 1)
[2025-11-10 11:37:34][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=2.0)"))).
[2025-11-10 11:37:34][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:37:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.117671, 'lon': -37.603778, 'label': 'Canapi, AL, Brazil'}
[2025-11-10 11:37:34][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-37.603778, -9.117671]]
[2025-11-10 11:37:34][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2307681.7m dur=111701s
[2025-11-10 11:37:34][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:34][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2307.6817, liters_empty=0.0000, liters_total=2307.6817
[2025-11-10 11:37:34][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2307.6817, fuel_cost_brl=13799.94, co2e_total_kg=6184.587, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:34][INFO][modules.app.evaluator] road_leg: km=2307.682 liters=2307.682 fuel_kg=1938.453 co2e=6184.587 cost=13799.94
[2025-11-10 11:37:34][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:37:34][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=215.181 km via centroid.
[2025-11-10 11:37:34][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (215.181 km).
[2025-11-10 11:37:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:37:34][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:37:34][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:37:34][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:34][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:37:34][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:34][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:37:34][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:37:34][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:37:34][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:37:34][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:37:34][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:37:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:37:34][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.117671, 'lon': -37.603778, 'label': 'Canapi, AL, Brazil'}
[2025-11-10 11:37:34][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-37.603778, -9.117671]]
[2025-11-10 11:37:34][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=255905.5m dur=14504s
[2025-11-10 11:37:34][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:34][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=255.9055, liters_empty=0.0000, liters_total=255.9055
[2025-11-10 11:37:34][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=255.9055, fuel_cost_brl=1530.31, co2e_total_kg=685.827, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:34][INFO][modules.app.evaluator] road_leg: km=255.905 liters=255.905 fuel_kg=214.961 co2e=685.827 cost=1530.31
[2025-11-10 11:37:34][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6184.587 kg, CABOTAGE CO2e=2357.262 kg (Δ=-3827.325 kg).
[2025-11-10 11:37:35][INFO][scripts.build_heatmap_from_file] CSV+ Canapi, AL,-10301.906834139325,-3827.324940489586
[2025-11-10 11:37:35][INFO][scripts.build_heatmap_from_file] ✓ done in 7.02s — Canapi, AL
[2025-11-10 11:37:35][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:35][INFO][scripts.build_heatmap_from_file] → [39/5570] Capela, AL
[2025-11-10 11:37:35][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:35][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:37:35][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:37:35][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:37:35][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:37:35][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:37:35][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:37:35][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:37:35][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:37:35][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:37:35][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:37:35][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:35][INFO][modules.addressing.resolver] GEOCODE text='Capela, AL' country=BR size=1
[2025-11-10 11:37:35][INFO][modules.road.ors_mixins] GEOCODE text="Capela, AL" country=BR size=1
[2025-11-10 11:37:35][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.412547, 'lon': -36.079412, 'label': 'Capela, AL, Brazil'}
[2025-11-10 11:37:35][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Capela, AL, Brazil'.
[2025-11-10 11:37:35][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:37:35][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:37:35][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:37:35][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:35][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.412547, 'lon': -36.079412, 'label': 'Capela, AL, Brazil'}
[2025-11-10 11:37:35][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-36.079412, -9.412547]]
[2025-11-10 11:37:38][WARNING][urllib3.connectionpool] Retrying (Retry(total=2, connect=0, read=0, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=2.0)")': /v2/directions/driving-hgv
[2025-11-10 11:37:41][ERROR][modules.road.ors_client] HTTP POST /v2/directions/driving-hgv — request exception ConnectionError after 6106 ms (attempt 1)
[2025-11-10 11:37:41][WARNING][modules.app.evaluator] Primary 'driving-hgv' failed (HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Max retries exceeded with url: /v2/directions/driving-hgv (Caused by ReadTimeoutError("HTTPSConnectionPool(host='api.openrouteservice.org', port=443): Read timed out. (read timeout=2.0)"))).
[2025-11-10 11:37:41][WARNING][modules.app.evaluator] Falling back to 'driving-car'.
[2025-11-10 11:37:41][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:41][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.412547, 'lon': -36.079412, 'label': 'Capela, AL, Brazil'}
[2025-11-10 11:37:41][INFO][modules.road.ors_mixins] ROUTE try1 driving-car coords=[[-46.730357, -23.558808], [-36.079412, -9.412547]]
[2025-11-10 11:37:41][INFO][modules.road.ors_mixins] ROUTE ok driving-car dist=2434558.9m dur=116494s
[2025-11-10 11:37:41][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:41][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=2434.5589, liters_empty=0.0000, liters_total=2434.5589
[2025-11-10 11:37:41][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=2434.5589, fuel_cost_brl=14558.66, co2e_total_kg=6524.618, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:41][INFO][modules.app.evaluator] road_leg: km=2434.559 liters=2434.559 fuel_kg=2045.029 co2e=6524.618 cost=14558.66
[2025-11-10 11:37:41][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Santos' (UF=SP) distance=60.236 km via gate 'Ponta da Praia'.
[2025-11-10 11:37:41][INFO][modules.cabotage.ports_nearest] find_nearest_port: nearest='Maceió' (UF=AL) distance=48.647 km via centroid.
[2025-11-10 11:37:41][INFO][modules.app.evaluator] Nearest ports: origin='Santos' (60.236 km), destiny='Maceió' (48.647 km).
[2025-11-10 11:37:41][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:41][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.9608, 'lon': -46.3336, 'label': 'Santos gate'}
[2025-11-10 11:37:41][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-46.3336, -23.9608]]
[2025-11-10 11:37:41][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=90591.9m dur=6251s
[2025-11-10 11:37:41][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:41][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=90.5919, liters_empty=0.0000, liters_total=90.5919
[2025-11-10 11:37:41][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=90.5919, fuel_cost_brl=541.74, co2e_total_kg=242.786, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:41][INFO][modules.app.evaluator] road_leg: km=90.592 liters=90.592 fuel_kg=76.097 co2e=242.786 cost=541.74
[2025-11-10 11:37:41][INFO][modules.cabotage.sea_matrix] SeaMatrix.km_with_source: using MATRIX for 'Santos' → 'Maceió' → 2295.515 km
[2025-11-10 11:37:41][INFO][modules.app.evaluator] Sea leg: km=2295.515 fuel=309.895 kg CO2e=993.522 cost=991.66.
[2025-11-10 11:37:41][INFO][modules.cabotage.accounting] load_hotel_entries: loaded 57 entries from 'modules\cabotage\_data\hotel.json'.
[2025-11-10 11:37:41][INFO][modules.cabotage.accounting] build_hotel_factor_index: cities=57.
[2025-11-10 11:37:41][INFO][modules.app.evaluator] ops+hotel: port=48.000 kg hotel_o=43.744 kg hotel_d=43.979 kg → total=135.723 kg
[2025-11-10 11:37:41][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.677, 'lon': -35.726, 'label': 'Maceió'}
[2025-11-10 11:37:41][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.412547, 'lon': -36.079412, 'label': 'Capela, AL, Brazil'}
[2025-11-10 11:37:41][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-35.726, -9.677], [-36.079412, -9.412547]]
[2025-11-10 11:37:41][INFO][modules.road.ors_mixins] ROUTE ok driving-hgv dist=63341.9m dur=4193s
[2025-11-10 11:37:41][INFO][modules.road.emissions] estimate_road_trip: axles resolved to 6 via payload=27.0 t (truck_key='auto_by_weight').
[2025-11-10 11:37:41][INFO][modules.road.fuel_model] estimate_leg_liters.result: trips=2, kmL_base=2.0000, kmL_loaded=2.0000, kmL_empty=2.3600, liters_loaded=63.3419, liters_empty=0.0000, liters_total=63.3419
[2025-11-10 11:37:41][INFO][modules.road.emissions] estimate_road_trip.result: liters_total=63.3419, fuel_cost_brl=378.78, co2e_total_kg=169.756, trips=2, kmL_loaded=2.0000, kmL_empty=2.3600
[2025-11-10 11:37:41][INFO][modules.app.evaluator] road_leg: km=63.342 liters=63.342 fuel_kg=53.207 co2e=169.756 cost=378.78
[2025-11-10 11:37:41][INFO][modules.app.evaluator] Evaluation done: ROAD CO2e=6524.618 kg, CABOTAGE CO2e=1841.192 kg (Δ=-4683.426 kg).
[2025-11-10 11:37:42][INFO][scripts.build_heatmap_from_file] CSV+ Capela, AL,-12212.162818139324,-4683.426284489586
[2025-11-10 11:37:42][INFO][scripts.build_heatmap_from_file] ✓ done in 7.05s — Capela, AL
[2025-11-10 11:37:42][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:42][INFO][scripts.build_heatmap_from_file] → [40/5570] Carneiros, AL
[2025-11-10 11:37:42][INFO][scripts.build_heatmap_from_file] ======================================================================
[2025-11-10 11:37:42][INFO][modules.functions.logging] Logging configured
[2025-11-10 11:37:42][INFO][modules.app.evaluator] Axles resolved via payload=50.000 t → 9 (truck_key='auto_by_weight').
[2025-11-10 11:37:42][INFO][modules.road.ors_common] ORSConfig init: base_url=https://api.openrouteservice.org timeouts=(8.0,30.0)s retries=3 backoff=0.90s cache=C:\Users\felipeproenca\Documents\workspaces\personal\carbon-footprint\.cache\ors_cache.sqlite ttl=2592000s country=BR profile=driving-hgv snap_404=True radius_m=2500 ua=Cabosupernet-ORSClient/4.0
[2025-11-10 11:37:42][INFO][modules.app.evaluator] ORSClient: created.
[2025-11-10 11:37:42][INFO][modules.cabotage.ports_index] load_ports: loaded 28 raw records from 'modules\cabotage\_data\ports_br.json'.
[2025-11-10 11:37:42][INFO][modules.cabotage.ports_index] load_ports: normalized 28 records (invalid skipped=0, with_gates=19).
[2025-11-10 11:37:42][INFO][modules.cabotage.sea_matrix] SeaMatrix.from_json_path: loaded JSON from 'modules\cabotage\_data\sea_matrix.json'.
[2025-11-10 11:37:42][INFO][modules.cabotage.sea_matrix] SeaMatrix: initialized with 28 labels, 784 directed edges (symmetric), coastline_factor=1.180
[2025-11-10 11:37:42][INFO][modules.addressing.resolver] GEOCODE text='Av. Luciano Gualberto' country=BR size=1
[2025-11-10 11:37:42][INFO][modules.road.ors_mixins] GEOCODE text="Av. Luciano Gualberto" country=BR size=1
[2025-11-10 11:37:42][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:42][INFO][modules.addressing.resolver] GEOCODE text='Carneiros, AL' country=BR size=1
[2025-11-10 11:37:42][INFO][modules.road.ors_mixins] GEOCODE text="Carneiros, AL" country=BR size=1
[2025-11-10 11:37:42][INFO][modules.addressing.resolver] RESOLVE (text) -> {'lat': -9.484066, 'lon': -37.375676, 'label': 'Carneiros, AL, Brazil'}
[2025-11-10 11:37:42][INFO][modules.app.evaluator] Resolved origin='Avenida Professor Luciano Gualberto, São Paulo, Brazil' destiny='Carneiros, AL, Brazil'.
[2025-11-10 11:37:42][INFO][modules.road.diesel_prices] load_latest_diesel_price: loaded 27 rows from 'modules\road\_data\latest_diesel_prices.csv'.
[2025-11-10 11:37:42][INFO][modules.road.diesel_prices] avg_price_for_ufs: uf_o=SP, uf_d=AL → price_o=6.09, price_d=5.87, avg=5.9800, fallback_used=False
[2025-11-10 11:37:42][INFO][modules.app.evaluator] Diesel price (avg UF_o/UF_d): 5.9800 BRL/L (fallback_used=False).
[2025-11-10 11:37:42][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -23.558808, 'lon': -46.730357, 'label': 'Avenida Professor Luciano Gualberto, São Paulo, Brazil'}
[2025-11-10 11:37:42][INFO][modules.addressing.resolver] RESOLVE (dict lat/lon) -> {'lat': -9.484066, 'lon': -37.375676, 'label': 'Carneiros, AL, Brazil'}
[2025-11-10 11:37:42][INFO][modules.road.ors_mixins] ROUTE try1 driving-hgv coords=[[-46.730357, -23.558808], [-37.375676, -9.484066]]
